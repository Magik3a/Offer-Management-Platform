$.widget("ui.dialogExtend",{options:{dblclick:true,load:null,beforeRestore:null,restore:null,maximizable:false,beforeMaximize:null,maximize:null},_create:function(){this._state="normal";this._initButtons();this._setState("normal");return this._trigger("load")},_setState:function(i){this.element.removeClass("ui-dialog-"+this._state).addClass("ui-dialog-"+i);return this._state=i},_initButtons:function(){var i=this;this._addButton("maximize",this.options.maximizable,Q.text("Dialogs.MaximizeHint"),"fa fa-window-maximize");this._addButton("restore",false,Q.text("Dialogs.RestoreHint"),"fa fa-window-restore");var t=this.element.closest(".ui-dialog").children(".ui-dialog-titlebar");t.dblclick(function(t){if(i.options.dblclick){if(i._state!=="normal"){return i.restore()}else{return i[i.options.dblclick]()}}}).select(function(){return false})},_addButton:function(i,t,e,o){var a=this;var l=this.element.closest(".ui-dialog").children(".ui-dialog-titlebar");var s=l.find(".ui-dialog-titlebar-close").first();var n=$('<button class="ui-button ui-corner-all ui-button-icon-only ui-dialog-titlebar-'+i+'" href="javascript:;" tabindex="-1"><i class="'+o+'"></i></a>').attr("title",e).toggle(t).click(function(t){t.preventDefault();return a[i]()});if(s)n.insertBefore(s);else n.appendTo(l);return n},maximize:function(){var i,t;i=$(window).height()-1;t=$(window).width()-1;this._trigger("beforeMaximize");if(this._state!=="normal"){this._restore()}this._saveSnapshot();if($(this.element[0]).dialog("option","draggable")){$(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end()}$(this.element[0]).dialog("widget").css("position","fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:false,draggable:false,height:i,width:t,position:{of:window,my:"left top",at:"left top"}});this._setState("maximized");this._toggleButtons();if(this.original_config_resizable)this.element.closest(".ui-dialog").triggerHandler("resize");return this._trigger("maximize")},_restore_maximized:function(){var i;i=this._loadSnapshot();$(this.element[0]).dialog("widget").css("position",i.position.mode).find(".ui-dialog-titlebar").css("white-space",i.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:i.config.resizable,draggable:i.config.draggable,height:i.size.height,width:i.size.width,maxHeight:i.size.maxHeight,position:{of:window,my:"left top",at:"left+"+i.position.left+" top+"+i.position.top}});if($(this.element[0]).dialog("option","draggable")){return $(this.element[0]).dialog("widget").draggable("option","handle",$(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?$(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move")}},state:function(){return this._state},restore:function(){this._trigger("beforeRestore");this._restore();this._setState("normal");this._toggleButtons();if(this.original_config_resizable)this.element.closest(".ui-dialog").triggerHandler("resize");return this._trigger("restore")},_restore:function(){if(this._state!=="normal"){return this["_restore_"+this._state]()}},_saveSnapshot:function(){if(this._state==="normal"){this.original_config_resizable=$(this.element[0]).dialog("option","resizable");this.original_config_draggable=$(this.element[0]).dialog("option","draggable");this.original_size_height=$(this.element[0]).dialog("widget").outerHeight();this.original_size_width=$(this.element[0]).dialog("option","width");this.original_size_maxHeight=$(this.element[0]).dialog("option","maxHeight");this.original_position_mode=$(this.element[0]).dialog("widget").css("position");this.original_position_left=$(this.element[0]).dialog("widget").offset().left-$("body").scrollLeft();this.original_position_top=$(this.element[0]).dialog("widget").offset().top-$("body").scrollTop();return this.original_titlebar_wrap=$(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css("white-space")}},_loadSnapshot:function(){return{config:{resizable:this.original_config_resizable,draggable:this.original_config_draggable},size:{height:this.original_size_height,width:this.original_size_width,maxHeight:this.original_size_maxHeight},position:{mode:this.original_position_mode,left:this.original_position_left,top:this.original_position_top},titlebar:{wrap:this.original_titlebar_wrap}}},_toggleButtons:function(){var i=this.element.closest(".ui-dialog");i.find(".ui-dialog-titlebar-restore").toggle(this._state!=="normal");i.find(".ui-dialog-titlebar-maximize").toggle(this._state!=="maximized")}});