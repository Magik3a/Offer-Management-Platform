{"version":3,"file":"serenity-editors.js","sourceRoot":"","sources":["../../CoreLib/UI/Editors/StringEditor.ts","../../CoreLib/UI/Editors/PasswordEditor.ts","../../CoreLib/UI/Editors/TextAreaEditor.ts","../../CoreLib/UI/Editors/BooleanEditor.ts","../../CoreLib/UI/Editors/DecimalEditor.ts","../../CoreLib/UI/Editors/IntegerEditor.ts","../../CoreLib/UI/Editors/DateEditor.ts","../../CoreLib/UI/Editors/DateTimeEditor.ts","../../CoreLib/UI/Editors/TimeEditor.ts","../../CoreLib/UI/Editors/EmailAddressEditor.ts","../../CoreLib/UI/Editors/EmailEditor.ts","../../CoreLib/UI/Editors/URLEditor.ts","../../CoreLib/UI/Editors/RadioButtonEditor.ts","../../CoreLib/UI/Editors/Select2Editor.ts","../../CoreLib/UI/Editors/SelectEditor.ts","../../CoreLib/UI/Editors/DateYearEditor.ts","../../CoreLib/UI/Editors/EnumEditor.ts","../../CoreLib/UI/Editors/LookupEditor.ts","../../CoreLib/UI/Editors/ServiceLookupEditor.ts","../../CoreLib/UI/Editors/HtmlContentEditor.ts","../../CoreLib/UI/Editors/MaskedEditor.ts","../../CoreLib/UI/Editors/Recaptcha.ts","../../CoreLib/UI/Editors/UploadEditors.ts"],"names":[],"mappings":"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","sourcesContent":["namespace Serenity {\r\n    \r\n    @Decorators.registerEditor('Serenity.StringEditor', [IStringValue])\r\n    @Decorators.element(\"<input type=\\\"text\\\"/>\")\r\n    export class StringEditor extends Widget<any> {\r\n\r\n        constructor(input: JQuery) {\r\n            super(input);\r\n        }\r\n\r\n        public get value(): string {\r\n            return this.element.val();\r\n        }\r\n\r\n        protected get_value(): string {\r\n            return this.value;\r\n        }\r\n\r\n        public set value(value: string) {\r\n            this.element.val(value);\r\n        }\r\n\r\n        protected set_value(value: string): void {\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n}","namespace Serenity {\r\n    \r\n    @Decorators.registerEditor('Serenity.PasswordEditor')\r\n    export class PasswordEditor extends StringEditor {\r\n        constructor(input: JQuery) {\r\n            super(input);\r\n\r\n            input.attr('type', 'password');\r\n        }\r\n    }\r\n\r\n}","namespace Serenity {\r\n\r\n    export interface TextAreaEditorOptions {\r\n        cols?: number;\r\n        rows?: number;\r\n    }\r\n\r\n    @Decorators.registerEditor('Sereniy.TextAreaEditor', [IStringValue])\r\n    @Decorators.element(\"<textarea />\")\r\n    export class TextAreaEditor extends Widget<TextAreaEditorOptions> {\r\n\r\n        constructor(input: JQuery, opt?: TextAreaEditorOptions) {\r\n            super(input, opt);\r\n\r\n            if (this.options.cols !== 0) {\r\n                input.attr('cols', Q.coalesce(this.options.cols, 80));\r\n            }\r\n            if (this.options.rows !== 0) {\r\n                input.attr('rows', Q.coalesce(this.options.rows, 6));\r\n            }\r\n        }\r\n\r\n        public get value(): string {\r\n            return this.element.val();\r\n        }\r\n\r\n        protected get_value(): string {\r\n            return this.value;\r\n        }\r\n\r\n        public set value(value: string) {\r\n            this.element.val(value);\r\n        }\r\n\r\n        protected set_value(value: string): void {\r\n            this.value = value;\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n\r\n    @Decorators.registerEditor('Serenity.BooleanEditor', [IBooleanValue])\r\n    @Decorators.element('<input type=\"checkbox\"/>')\r\n    export class BooleanEditor extends Widget<any> {\r\n\r\n        public get value(): boolean {\r\n            return this.element.is(\":checked\");\r\n        }\r\n\r\n        protected get_value(): boolean {\r\n            return this.value;\r\n        }\r\n\r\n        public set value(value: boolean) {\r\n            this.element.prop(\"checked\", !!value);\r\n        }\r\n\r\n        protected set_value(value: boolean): void {\r\n            this.value = value;\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n    \r\n    export interface DecimalEditorOptions {\r\n        minValue?: string;\r\n        maxValue?: string;\r\n        decimals?: any;\r\n\t\tpadDecimals?: any;\r\n\t\tallowNegatives?: boolean;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.DecimalEditor', [IDoubleValue])\r\n    @Decorators.element('<input type=\"text\"/>')\r\n    export class DecimalEditor extends Widget<DecimalEditorOptions> implements IDoubleValue {\r\n\r\n        constructor(input: JQuery, opt?: DecimalEditorOptions) {\r\n            super(input, opt);\r\n\r\n            input.addClass('decimalQ');\r\n\t\t\tvar numericOptions = Q.extend(Serenity.DecimalEditor.defaultAutoNumericOptions(), {\r\n\t\t\t\tvMin: Q.coalesce(this.options.minValue, this.options.allowNegatives ? (this.options.maxValue != null ? (\"-\" + this.options.maxValue) : '-999999999999.99') : '0.00'),\r\n                vMax: Q.coalesce(this.options.maxValue, '999999999999.99')\r\n            });\r\n\r\n            if (this.options.decimals != null) {\r\n                numericOptions.mDec = this.options.decimals;\r\n            }\r\n\r\n            if (this.options.padDecimals != null) {\r\n                numericOptions.aPad = this.options.padDecimals;\r\n            }\r\n\r\n            if ($.fn.autoNumeric)\r\n                (input as any).autoNumeric(numericOptions);\r\n        }\r\n\r\n        get_value(): number {\r\n            if ($.fn.autoNumeric) {\r\n                var val = (this.element as any).autoNumeric('get');\r\n\r\n                if (!!(val == null || val === ''))\r\n                    return null;\r\n\r\n                return parseFloat(val);\r\n            }\r\n\r\n            var val = this.element.val();\r\n            return Q.parseDecimal(val);\r\n        }\r\n\r\n        get value(): number {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: number) {\r\n            if (value == null || (value as any) === '') {\r\n                this.element.val('');\r\n            }\r\n            else if ($.fn.autoNumeric) {\r\n                (this.element as any).autoNumeric('set', value);\r\n            }\r\n            else\r\n                this.element.val(Q.formatNumber(value));\r\n        }\r\n\r\n        set value(v: number) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        get_isValid(): boolean {\r\n            return !isNaN(this.get_value());\r\n        }\r\n\r\n        static defaultAutoNumericOptions(): any {\r\n            return {\r\n                aDec: Q.Culture.decimalSeparator,\r\n                altDec: ((Q.Culture.decimalSeparator === '.') ? ',' : '.'),\r\n                aSep: ((Q.Culture.decimalSeparator === '.') ? ',' : '.'),\r\n                aPad: true\r\n            };\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface IntegerEditorOptions {\r\n        minValue?: number;\r\n\t\tmaxValue?: number;\r\n\t\tallowNegatives?: boolean;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.IntegerEditor', [IDoubleValue])\r\n    @Decorators.element('<input type=\"text\"/>')\r\n    export class IntegerEditor extends Widget<IntegerEditorOptions> implements IDoubleValue {\r\n\r\n        constructor(input: JQuery, opt?: IntegerEditorOptions) {\r\n            super(input, opt);\r\n\r\n            input.addClass('integerQ');\r\n            var numericOptions = Q.extend(Serenity.DecimalEditor.defaultAutoNumericOptions(),\r\n                {\r\n\t\t\t\t\tvMin: Q.coalesce(this.options.minValue, this.options.allowNegatives ? (this.options.maxValue != null ? (\"-\" + this.options.maxValue) : '-2147483647') : '0'),\r\n                    vMax: Q.coalesce(this.options.maxValue, 2147483647),\r\n                    aSep: null\r\n                });\r\n\r\n            if ($.fn.autoNumeric)\r\n                (input as any).autoNumeric(numericOptions);\r\n        }\r\n\r\n        get_value(): number {\r\n            if ($.fn.autoNumeric) {\r\n                var val = (this.element as any).autoNumeric('get') as string;\r\n                if (!!Q.isTrimmedEmpty(val))\r\n                    return null;\r\n                else \r\n                    return parseInt(val, 10);\r\n            } \r\n            else {\r\n                var val = Q.trimToNull(this.element.val());\r\n                if (val == null)\r\n                    return null;\r\n                return Q.parseInteger(val)\r\n            }\r\n\r\n        }\r\n\r\n        get value(): number {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: number) {\r\n            if (value == null || (value as any) === '')\r\n                this.element.val('');\r\n            else if ($.fn.autoNumeric)\r\n                (this.element as any).autoNumeric('set', value);\r\n            else\r\n                this.element.val(Q.formatNumber(value));\r\n        }\r\n\r\n        set value(v: number) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        get_isValid(): boolean {\r\n            return !isNaN(this.get_value());\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n    \r\n    import Option = Serenity.Decorators.option\r\n\r\n    export let datePickerIconSvg = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 17 17\"><g></g><path d=\"M14 2v-1h-3v1h-5v-1h-3v1h-3v15h17v-15h-3zM12 2h1v2h-1v-2zM4 2h1v2h-1v-2zM16 16h-15v-8.921h15v8.921zM1 6.079v-3.079h2v2h3v-2h5v2h3v-2h2v3.079h-15z\" fill=\"#000000\"></path></svg>';\r\n\r\n    @Decorators.registerEditor('Serenity.DateEditor', [IStringValue, IReadOnly])\r\n    @Decorators.element('<input type=\"text\"/>')\r\n    export class DateEditor extends Widget<any> implements IStringValue, IReadOnly {\r\n\r\n        private minValue: string;\r\n        private maxValue: string;\r\n        private minDate: string;\r\n        private maxDate: string;\r\n        private sqlMinMax: boolean;\r\n\r\n        constructor(input: JQuery) {\r\n            super(input);\r\n\r\n            if (typeof flatpickr !== \"undefined\" && (DateEditor.useFlatpickr || !$.fn.datepicker)) {\r\n                flatpickr(input[0], DateEditor.flatPickrOptions(input));\r\n            }\r\n            else if ($.fn.datepicker) {\r\n                input.datepicker({\r\n                    showOn: 'button',\r\n                    beforeShow: (inp, inst) => {\r\n                        return !input.hasClass('readonly') as any;\r\n                    },\r\n                    yearRange: Q.coalesce(this.yearRange, '-100:+50')\r\n                });\r\n\r\n            }\r\n            else {\r\n                input.attr('type', 'date');\r\n            }\r\n\r\n            input.on('keyup.' + this.uniqueName, e => {\r\n                if (e.which === 32 && !this.get_readOnly()) {\r\n                    if (this.get_valueAsDate() != Q.today()) {\r\n                        this.set_valueAsDate(Q.today());\r\n                        this.element.trigger('change');\r\n                    }\r\n                }\r\n                else {\r\n                    Serenity.DateEditor.dateInputKeyup(e);\r\n                }\r\n            });\r\n\r\n            input.on('change.' + this.uniqueName, Serenity.DateEditor.dateInputChange);\r\n\r\n            Q.addValidationRule(input, this.uniqueName, e1 => {\r\n                var value = this.get_value();\r\n                if (Q.isEmptyOrNull(value)) {\r\n                    return null;\r\n                }\r\n\r\n                if (!Q.isEmptyOrNull(this.get_minValue()) && Q.Invariant.stringCompare(value, this.get_minValue()) < 0) {\r\n                    return Q.format(Q.text('Validation.MinDate'), Q.formatDate(this.get_minValue(), null));\r\n                }\r\n\r\n                if (!Q.isEmptyOrNull(this.get_maxValue()) && Q.Invariant.stringCompare(value, this.get_maxValue()) >= 0) {\r\n                    return Q.format(Q.text('Validation.MaxDate'), Q.formatDate(this.get_maxValue(), null));\r\n                }\r\n\r\n                return null;\r\n            });\r\n\r\n            this.set_sqlMinMax(true)\r\n        }\r\n\r\n        public static useFlatpickr: boolean;\r\n\r\n        public static flatPickrOptions(input: JQuery) {\r\n            return {\r\n                clickOpens: true,\r\n                allowInput: true,\r\n                dateFormat: Q.Culture.dateOrder.split('').join(Q.Culture.dateSeparator).replace('y', 'Y'),\r\n                onChange: function() {\r\n                    input.triggerHandler('change');\r\n                }\r\n            }\r\n        }\r\n\r\n        get_value(): string {\r\n            var value = this.element.val().trim();\r\n            if (value != null && value.length === 0) {\r\n                return null;\r\n            }\r\n\r\n\t\t\treturn Q.formatDate(value, 'yyyy-MM-dd');\r\n        }\r\n\r\n        get value(): string {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: string) {\r\n            if (value == null) {\r\n                this.element.val('');\r\n            }\r\n\t\t\telse if (value.toLowerCase() === 'today' || value.toLowerCase() === 'now') {\r\n                this.element.val(Q.formatDate(Q.today(), null));\r\n            }\r\n\t\t\telse {\r\n                this.element.val(Q.formatDate(value, null));\r\n            }\r\n        }\r\n\r\n        set value(v: string) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        private get_valueAsDate(): Date {\r\n            if (Q.isEmptyOrNull(this.get_value())) {\r\n                return null;\r\n            }\r\n\r\n\t\t\treturn Q.parseISODateTime(this.get_value());\r\n        }\r\n\r\n        get valueAsDate(): Date {\r\n            return this.get_valueAsDate();\r\n        }\r\n\r\n        private set_valueAsDate(value: Date): void {\r\n            if (value == null) {\r\n                this.set_value(null);\r\n            }\r\n\r\n\t\t\tthis.set_value(Q.formatDate(value, 'yyyy-MM-dd'));\r\n        }\r\n\r\n        set valueAsDate(v: Date) {\r\n            this.set_valueAsDate(v);\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return this.element.hasClass('readonly');\r\n        }\r\n\r\n        set_readOnly(value: boolean): void {\r\n\r\n            if (value !== this.get_readOnly()) {\r\n                if (value) {\r\n                    this.element.addClass('readonly').attr('readonly', 'readonly');\r\n                    this.element.nextAll('.ui-datepicker-trigger').css('opacity', '0.1');\r\n                }\r\n                else {\r\n                    this.element.removeClass('readonly').removeAttr('readonly');\r\n                    this.element.nextAll('.ui-datepicker-trigger').css('opacity', '1');\r\n                }\r\n            }\r\n        }\r\n\r\n        @Option()\r\n        public yearRange: string;\r\n\r\n        @Option()\r\n        get_minValue(): string {\r\n            return this.minValue;\r\n        }\r\n\r\n        set_minValue(value: string) {\r\n            this.minValue = value;\r\n        }\r\n\r\n        @Option()\r\n        get_maxValue(): string {\r\n            return this.maxValue;\r\n        }\r\n\r\n        set_maxValue(value: string): void {\r\n            this.maxValue = value;\r\n        }\r\n\r\n        get_minDate(): Date {\r\n            return Q.parseISODateTime(this.get_minValue());\r\n        }\r\n\r\n        set_minDate(value: Date): void {\r\n            this.set_minValue(Q.formatDate(value, 'yyyy-MM-dd'));\r\n        }\r\n\r\n        @Option()\r\n        get_maxDate(): Date {\r\n            return Q.parseISODateTime(this.get_maxValue());\r\n        }\r\n\r\n        set_maxDate(value: Date) {\r\n            this.set_maxValue(Q.formatDate(value, 'yyyy-MM-dd'));\r\n        }\r\n\r\n        @Option()\r\n        get_sqlMinMax(): boolean {\r\n            return this.get_minValue() === '1753-01-01' && this.get_maxValue() === '9999-12-31';\r\n        }\r\n\r\n        set_sqlMinMax(value: boolean) {\r\n            if (value) {\r\n                this.set_minValue('1753-01-01');\r\n                this.set_maxValue('9999-12-31');\r\n            }\r\n\t\t\telse {\r\n                this.set_minValue(null);\r\n                this.set_maxValue(null);\r\n            }\r\n        }\r\n\r\n        static dateInputChange = function (e: JQueryEventObject) {\r\n            if (Q.Culture.dateOrder !== 'dmy') {\r\n                return;\r\n            }\r\n            var input = $(e.target);\r\n            if (!input.is(':input') || input.attr(\"type\") == \"date\") {\r\n                return;\r\n            }\r\n            var val = Q.coalesce(input.val(), '');\r\n            var x = {};\r\n            if (val.length >= 6 && /^[0-9]*$/g.test(val)) {\r\n                input.val(val.substr(0, 2) + Q.Culture.dateSeparator + val.substr(2, 2) + Q.Culture.dateSeparator + val.substr(4));\r\n            }\r\n            val = Q.coalesce(input.val(), '');\r\n            if (!!(val.length >= 5 && Q.parseDate(val) !== false)) {\r\n                var d = Q.parseDate(val);\r\n                input.val(Q.formatDate(d, null));\r\n            }\r\n        };\r\n\r\n        static flatPickrTrigger(input: JQuery): JQuery {\r\n            return $('<i class=\"ui-datepicker-trigger\" href=\"javascript:;\">' + datePickerIconSvg + '</i>')\r\n                .insertAfter(input)\r\n                .click(() => {\r\n                    if (!input.hasClass('readonly'))\r\n                        // @ts-ignore\r\n                        input[0]._flatpickr.open();\r\n                });\r\n        }\r\n\r\n        static dateInputKeyup(e: JQueryEventObject) {\r\n\r\n            if (Q.Culture.dateOrder !== 'dmy') {\r\n                return;\r\n            }\r\n\r\n            var input = $(e.target);\r\n            if (!input.is(':input') || input.attr(\"type\") == \"date\") {\r\n                // for browser date editors, format might not match culture setting\r\n                return;\r\n            }\r\n\r\n            if (input.is('[readonly]') || input.is(':disabled')) {\r\n                return;\r\n            }\r\n\r\n            var val: string = Q.coalesce(input.val(), '');\r\n            if (!!(val.length === 0 || (input[0] as any).selectionEnd !== val.length)) {\r\n                return;\r\n            }\r\n\r\n            if (val.indexOf(Q.Culture.dateSeparator + Q.Culture.dateSeparator) !== -1) {\r\n                input.val(Q.replaceAll(val, Q.Culture.dateSeparator + Q.Culture.dateSeparator,\r\n                    Q.Culture.dateSeparator));\r\n                return;\r\n            }\r\n\r\n            function isNumeric(c: number): boolean {\r\n                return c >= 48 && c <= 57;\r\n            }\r\n\r\n            if (e.which === 47 || e.which === 111) {\r\n\r\n                if (val.length >= 2 && val.charAt(val.length - 1) === Q.Culture.dateSeparator &&\r\n                    val.charAt(val.length - 2) === Q.Culture.dateSeparator) {\r\n                    input.val(val.substr(0, val.length - 1));\r\n                    return;\r\n                }\r\n\r\n                if (val.charAt(val.length - 1) !== Q.Culture.dateSeparator) {\r\n                    return;\r\n                }\r\n\r\n                switch (val.length) {\r\n                    case 2: {\r\n                        if (isNumeric(val.charCodeAt(0))) {\r\n                            val = '0' + val;\r\n                            break;\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    case 4: {\r\n                        if (isNumeric(val.charCodeAt(0)) &&\r\n                            isNumeric(val.charCodeAt(2)) &&\r\n                            val.charAt(1) == Q.Culture.dateSeparator) {\r\n                            val = '0' + val.charAt(0) + Q.Culture.dateSeparator + '0' +\r\n                                val.charAt(2) + Q.Culture.dateSeparator;\r\n                            break;\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    case 5: {\r\n                        if (isNumeric(val.charCodeAt(0)) &&\r\n                            isNumeric(val.charCodeAt(2)) &&\r\n                            isNumeric(val.charCodeAt(3)) &&\r\n                            val.charAt(1) === Q.Culture.dateSeparator) {\r\n                            val = '0' + val;\r\n                            break;\r\n                        }\r\n                        else if (isNumeric(val.charCodeAt(0)) &&\r\n                            isNumeric(val.charCodeAt(1)) &&\r\n                            isNumeric(val.charCodeAt(3)) &&\r\n                            val.charAt(2) === Q.Culture.dateSeparator) {\r\n                            val = val.charAt(0) + val.charAt(1) +\r\n                                Q.Culture.dateSeparator + '0' + val.charAt(3) + Q.Culture.dateSeparator;\r\n                            break;\r\n                        }\r\n                        else {\r\n                            break;\r\n                        }\r\n                    }\r\n                    default: {\r\n                        return;\r\n                    }\r\n                }\r\n                input.val(val);\r\n            }\r\n\r\n            if (val.length < 6 && (e.which >= 48 && e.which <= 57 || e.which >= 96 && e.which <= 105) &&\r\n                isNumeric(val.charCodeAt(val.length - 1))) {\r\n                switch (val.length) {\r\n                    case 1: {\r\n                        if (val.charCodeAt(0) <= 51) {\r\n                            return;\r\n                        }\r\n                        val = '0' + val;\r\n                        break;\r\n                    }\r\n\r\n                    case 2: {\r\n                        if (!isNumeric(val.charCodeAt(0))) {\r\n                            return;\r\n                        }\r\n                        break;\r\n                    }\r\n\r\n                    case 3: {\r\n                        if (!isNumeric(val.charCodeAt(0)) ||\r\n                            val.charAt(1) !== Q.Culture.dateSeparator ||\r\n                            val.charCodeAt(2) <= 49) {\r\n                            return;\r\n                        }\r\n\r\n                        val = '0' + val.charAt(0) + Q.Culture.dateSeparator + '0' + val.charAt(2);\r\n                        break;\r\n                    }\r\n\r\n                    case 4: {\r\n                        if (val.charAt(1) == Q.Culture.dateSeparator) {\r\n                            if (!isNumeric(val.charCodeAt(0)) ||\r\n                                !isNumeric(val.charCodeAt(2))) {\r\n                                return;\r\n                            }\r\n\r\n                            val = '0' + val;\r\n                            break;\r\n                        }\r\n                        else if (val.charAt(2) == Q.Culture.dateSeparator) {\r\n                            if (!isNumeric(val.charCodeAt(0)) ||\r\n                                !isNumeric(val.charCodeAt(1)) ||\r\n                                val.charCodeAt(3) <= 49) {\r\n                                return;\r\n                            }\r\n\r\n                            val = val.charAt(0) + val.charAt(1) + Q.Culture.dateSeparator +\r\n                                '0' + val.charAt(3);\r\n                            break;\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                    }\r\n                    case 5: {\r\n                        if (val.charAt(2) !== Q.Culture.dateSeparator ||\r\n                            !isNumeric(val.charCodeAt(0)) ||\r\n                            !isNumeric(val.charCodeAt(1)) ||\r\n                            !isNumeric(val.charCodeAt(3))) {\r\n                            return;\r\n                        }\r\n\r\n                        break;\r\n                    }\r\n\r\n                    default: {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                input.val(val + Q.Culture.dateSeparator);\r\n            }\r\n        };\r\n    }\r\n\r\n    function jQueryDatepickerInitialization(): boolean {\r\n        if (!$.datepicker || !$.datepicker.regional || !$.datepicker.regional.en)\r\n            return false;\r\n        let order = Q.Culture.dateOrder;\r\n        let s = Q.Culture.dateSeparator;\r\n        let culture = ($('html').attr('lang') || 'en').toLowerCase();\r\n        if (!$.datepicker.regional[culture]) {\r\n            culture = culture.split('-')[0];\r\n            if (!$.datepicker.regional[culture]) {\r\n                culture = 'en';\r\n            }\r\n        }\r\n        $.datepicker.setDefaults($.datepicker.regional['en']);\r\n        $.datepicker.setDefaults($.datepicker.regional[culture]);\r\n        $.datepicker.setDefaults({\r\n            dateFormat: (order == 'mdy' ? 'mm' + s + 'dd' + s + 'yy' :\r\n                (order == 'ymd' ? 'yy' + s + 'mm' + s + 'dd' :\r\n                    'dd' + s + 'mm' + s + 'yy')),\r\n            buttonImage: 'data:image/svg+xml,' + encodeURIComponent(datePickerIconSvg),\r\n            buttonImageOnly: true,\r\n            showOn: 'both',\r\n            showButtonPanel: true,\r\n            changeMonth: true,\r\n            changeYear: true\r\n        });\r\n        return true;\r\n    };\r\n\r\n    typeof $ !== \"undefined\" && !jQueryDatepickerInitialization() && $(jQueryDatepickerInitialization);\r\n}","namespace Serenity {\r\n\r\n    import Option = Serenity.Decorators.option\r\n\r\n    @Decorators.registerEditor('Serenity.DateTimeEditor', [IStringValue, IReadOnly])\r\n    @Decorators.element('<input type=\"text\"/>')\r\n    export class DateTimeEditor extends Widget<DateTimeEditorOptions> implements IStringValue, IReadOnly {\r\n\r\n        private minValue: string;\r\n        private maxValue: string;\r\n        private minDate: string;\r\n        private maxDate: string;\r\n        private sqlMinMax: boolean;\r\n        private time: JQuery;\r\n        private lastSetValue: string;\r\n        private lastSetValueGet: string;\r\n\r\n        constructor(input: JQuery, opt?: DateTimeEditorOptions) {\r\n            super(input, opt);\r\n            \r\n            input.addClass('s-DateTimeEditor');\r\n\r\n            if (this.options.inputOnly) {\r\n                input.addClass('dateTimeQ');\r\n                // just a basic input, usually read only display\r\n            }\r\n            else if (typeof flatpickr !== \"undefined\" && (DateEditor.useFlatpickr || !$.fn.datepicker || this.options.seconds)) {\r\n                input.addClass('dateTimeQ');\r\n                flatpickr(input[0], this.getFlatpickrOptions());\r\n            }\r\n            else if ($.fn.datepicker) {\r\n                input.addClass('dateQ');\r\n\r\n                input.datepicker({\r\n                    showOn: 'button',\r\n                    beforeShow: function () {\r\n                        return !input.hasClass('readonly');\r\n                    } as any,\r\n                    yearRange: Q.coalesce(this.options.yearRange, '-100:+50')\r\n                });\r\n\r\n                input.bind('change.' + this.uniqueName, (e) => {\r\n                    this.lastSetValue = null;\r\n                    DateEditor.dateInputChange(e);\r\n                });\r\n\r\n                this.time = $('<select/>').addClass('editor s-DateTimeEditor time');\r\n                var after = input.next('.ui-datepicker-trigger');\r\n                if (after.length > 0) {\r\n                    this.time.insertAfter(after);\r\n                }\r\n                else {\r\n                    after = input.prev('.ui-datepicker-trigger');\r\n                    if (after.length > 0) {\r\n                        this.time.insertBefore(after);\r\n                    }\r\n                    else {\r\n                        this.time.insertAfter(input);\r\n                    }\r\n                }\r\n    \r\n                this.time.on('change', function (e3) {\r\n                    this.lastSetValue = null;\r\n                    input.triggerHandler('change');\r\n                });\r\n    \r\n                var timeOpt = DateTimeEditor.getTimeOptions(\r\n                    Q.coalesce(this.options.startHour, 0), 0,\r\n                    Q.coalesce(this.options.endHour, 23), 59,\r\n                    Q.coalesce(this.options.intervalMinutes, 5));\r\n    \r\n                for (var t of timeOpt) {\r\n                    Q.addOption(this.time, t, t);\r\n                }\r\n    \r\n                Q.addValidationRule(input, this.uniqueName, e1 => {\r\n                    var value = this.get_value();\r\n                    if (Q.isEmptyOrNull(value)) {\r\n                        return null;\r\n                    }\r\n    \r\n                    if (!Q.isEmptyOrNull(this.get_minValue()) &&\r\n                        Q.Invariant.stringCompare(value, this.get_minValue()) < 0) {\r\n                        return Q.format(Q.text('Validation.MinDate'),\r\n                            Q.formatDate(this.get_minValue(), null));\r\n                    }\r\n    \r\n                    if (!Q.isEmptyOrNull(this.get_maxValue()) &&\r\n                        Q.Invariant.stringCompare(value, this.get_maxValue()) >= 0) {\r\n                        return Q.format(Q.text('Validation.MaxDate'),\r\n                            Q.formatDate(this.get_maxValue(), null));\r\n                    }\r\n                    return null;\r\n                });   \r\n            }\r\n            else \r\n                input.attr('type', 'datetime').addClass('dateTimeQ');\r\n\r\n            input.bind('keyup.' + this.uniqueName, e => {\r\n                if (this.get_readOnly())\r\n                    return;\r\n              \r\n                if (this.time) {\r\n                    if (e.which === 32) {\r\n                        if (this.get_valueAsDate() !== new Date()) {\r\n                            this.set_valueAsDate(new Date());\r\n                            this.element.trigger('change');\r\n                        }\r\n                    }\r\n                    else {\r\n                        var before = this.element.val();\r\n                        Serenity.DateEditor.dateInputKeyup(e);\r\n                        if (before != this.element.val())\r\n                            this.lastSetValue = null;\r\n                    }\r\n                }\r\n            });\r\n\r\n            this.set_sqlMinMax(true);\r\n\r\n            if (!this.options.inputOnly) {\r\n                $(\"<i class='inplace-button inplace-now'><b></b></div>\")\r\n                    .attr('title', 'set to now')\r\n                    .insertAfter(this.time).click(e2 => {\r\n                        if (this.element.hasClass('readonly')) {\r\n                            return;\r\n                        }\r\n                        this.lastSetValue = null;\r\n                        this.set_valueAsDate(new Date());\r\n                        input.triggerHandler('change');\r\n                    });\r\n            }\r\n        }\r\n\r\n        getFlatpickrOptions(): any {\r\n            return {\r\n                clickOpens: true,\r\n                allowInput: true,\r\n                enableTime: true,\r\n                time_24hr: true,\r\n                enableSeconds: !!this.options.seconds,\r\n                minuteIncrement: this.options.intervalMinutes ?? 5,\r\n                dateFormat: Q.Culture.dateOrder.split('').join(Q.Culture.dateSeparator).replace('y', 'Y') + \" H:i\" + (this.options.seconds ? \":S\" : \"\"),\r\n                onChange: () => {\r\n                    this.lastSetValue = null;\r\n                    this.element && this.element.triggerHandler('change');\r\n                }\r\n            }\r\n        }\r\n\r\n        get_value(): string {           \r\n            var value = this.element.val().trim();\r\n            if (value != null && value.length === 0) {\r\n                return null;\r\n            }\r\n\r\n            var result: string;\r\n            if (this.time) {\r\n                var datePart = Q.formatDate(value, 'yyyy-MM-dd');\r\n                var timePart = this.time.val();\r\n                 result = datePart + 'T' + timePart + ':00.000';\r\n            }\r\n            else\r\n                result = Q.formatDate(Q.parseDate(this.element.val()), \"yyyy-MM-ddTHH:mm:ss.fff\");\r\n\r\n            if (this.options.useUtc)\r\n                result = Q.formatISODateTimeUTC(Q.parseISODateTime(result));\r\n\r\n            if (this.lastSetValue != null &&\r\n                this.lastSetValueGet == result)\r\n                return this.lastSetValue;\r\n\r\n\t\t\treturn result;\r\n        }\r\n\r\n        get value(): string {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: string) {\r\n            if (Q.isEmptyOrNull(value)) {\r\n                this.element.val('');\r\n                this.time && this.time.val('00:00');\r\n            }\r\n\t\t\telse if (value.toLowerCase() === 'today') {\r\n                if (this.time) {\r\n                    this.element.val(Q.formatDate(Q.today(), null));\r\n                    this.time.val('00:00');\r\n                }\r\n                else {\r\n                    this.element.val(this.getDisplayFormat())\r\n                }\r\n            }\r\n\t\t\telse {\r\n                var val = ((value.toLowerCase() === 'now') ? new Date() : Q.parseISODateTime(value));\r\n                if (this.time) {\r\n                    val = Serenity.DateTimeEditor.roundToMinutes(val, Q.coalesce(this.options.intervalMinutes, 5));\r\n                    this.element.val(Q.formatDate(val, null));\r\n                    this.time.val(Q.formatDate(val, 'HH:mm'));\r\n                }\r\n                else\r\n                    this.element.val(Q.formatDate(val, this.getDisplayFormat()));\r\n            }\r\n\r\n            this.lastSetValue = null;\r\n            if (!Q.isEmptyOrNull(value) && value.toLowerCase() != 'today' && value.toLowerCase() != 'now') {\r\n                this.lastSetValueGet = this.get_value();\r\n                this.lastSetValue = value;\r\n            }\r\n        }\r\n\r\n        private getDisplayFormat(): string {\r\n            return (this.options.seconds ? Q.Culture.dateTimeFormat : Q.Culture.dateTimeFormat.replace(':ss', ''));\r\n        }\r\n\r\n        set value(v: string) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        private get_valueAsDate(): Date {\r\n            if (Q.isEmptyOrNull(this.get_value())) {\r\n                return null;\r\n            }\r\n\r\n\t\t\treturn Q.parseISODateTime(this.get_value());\r\n        }\r\n\r\n        get valueAsDate() {\r\n            return this.get_valueAsDate();\r\n        }\r\n\r\n        private set_valueAsDate(value: Date) {\r\n            if (value == null) {\r\n                this.set_value(null);\r\n            }\r\n\r\n\t\t\tthis.set_value(Q.formatDate(value, 'yyyy-MM-ddTHH:mm' + (this.options.seconds ? ':ss' : '')));\r\n        }\r\n\r\n        set valueAsDate(value: Date) {\r\n            this.set_valueAsDate(value);\r\n        }\r\n\r\n        @Option()\r\n        get_minValue(): string {\r\n            return this.minValue;\r\n        }\r\n\r\n        set_minValue(value: string) {\r\n            this.minValue = value;\r\n        }\r\n\r\n        @Option()\r\n        get_maxValue(): string {\r\n            return this.maxValue;\r\n        }\r\n\r\n        set_maxValue(value: string): void {\r\n            this.maxValue = value;\r\n        }\r\n\r\n        get_minDate(): Date {\r\n            return Q.parseISODateTime(this.get_minValue());\r\n        }\r\n\r\n        set_minDate(value: Date): void {\r\n            this.set_minValue(Q.formatDate(value, 'yyyy-MM-ddTHH:mm:ss'));\r\n        }\r\n\r\n        @Option()\r\n        get_maxDate(): Date {\r\n            return Q.parseISODateTime(this.get_maxValue());\r\n        }\r\n\r\n        set_maxDate(value: Date) {\r\n            this.set_maxValue(Q.formatDate(value, 'yyyy-MM-ddTHH:mm:ss'));\r\n        }\r\n\r\n        @Option()\r\n        get_sqlMinMax(): boolean {\r\n            return this.get_minValue() === '1753-01-01' && this.get_maxValue() === '9999-12-31';\r\n        }\r\n\r\n        set_sqlMinMax(value: boolean) {\r\n            if (value) {\r\n                this.set_minValue('1753-01-01');\r\n                this.set_maxValue('9999-12-31');\r\n            }\r\n            else {\r\n                this.set_minValue(null);\r\n                this.set_maxValue(null);\r\n            }\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return this.element.hasClass('readonly');\r\n        }\r\n\r\n        set_readOnly(value: boolean): void {\r\n\r\n            if (value !== this.get_readOnly()) {\r\n                if (value) {\r\n                    this.element.addClass('readonly').attr('readonly', 'readonly');\r\n                    this.element.nextAll('.ui-datepicker-trigger').css('opacity', '0.1');\r\n                    this.element.nextAll('.inplace-now').css('opacity', '0.1');\r\n\r\n                }\r\n                else {\r\n                    this.element.removeClass('readonly').removeAttr('readonly');\r\n                    this.element.nextAll('.ui-datepicker-trigger').css('opacity', '1');\r\n                    this.element.nextAll('.inplace-now').css('opacity', '1');\r\n                }\r\n                this.time && this.time.attr('readonly', value ? \"readonly\" : null)\r\n            }\r\n        }\r\n\r\n        static roundToMinutes(date: Date, minutesStep: number) {\r\n            date = new Date(date.getTime());\r\n            var m = Q.trunc(Q.round(date.getMinutes() / minutesStep) * minutesStep);\r\n            date.setMinutes(m);\r\n            date.setSeconds(0);\r\n            date.setMilliseconds(0);\r\n            return date;\r\n        }\r\n\r\n        static getTimeOptions = function (fromHour: number, fromMin: number,\r\n            toHour: number, toMin: number, stepMins: number) {\r\n            var list = [];\r\n            if (toHour >= 23) {\r\n                toHour = 23;\r\n            }\r\n            if (toMin >= 60) {\r\n                toMin = 59;\r\n            }\r\n            var hour = fromHour;\r\n            var min = fromMin;\r\n            while (true) {\r\n                if (hour > toHour || hour === toHour && min > toMin) {\r\n                    break;\r\n                }\r\n                var t = ((hour >= 10) ? '' : '0') + hour + ':' + ((min >= 10) ? '' : '0') + min;\r\n                list.push(t);\r\n                min += stepMins;\r\n                if (min >= 60) {\r\n                    min -= 60;\r\n                    hour++;\r\n                }\r\n            }\r\n            return list;\r\n        };\r\n    }\r\n\r\n    export interface DateTimeEditorOptions {\r\n        startHour?: any;\r\n        endHour?: any;\r\n        intervalMinutes?: any;\r\n        yearRange?: string;\r\n        useUtc?: boolean;\r\n        seconds?: boolean;\r\n        inputOnly?: boolean;\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface TimeEditorOptions {\r\n        noEmptyOption?: boolean;\r\n        startHour?: any;\r\n        endHour?: any;\r\n        intervalMinutes?: any;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.TimeEditor', [IDoubleValue, IReadOnly])\r\n    @Decorators.element(\"<select />\")\r\n    export class TimeEditor extends Widget<TimeEditorOptions> {\r\n\r\n        private minutes: JQuery;\r\n\r\n        constructor(input: JQuery, opt?: TimeEditorOptions) {\r\n            super(input, opt);\r\n\r\n            input.addClass('editor s-TimeEditor hour');\r\n\r\n            if (!this.options.noEmptyOption) {\r\n                Q.addOption(input, '', '--');\r\n            }\r\n\r\n            for (var h = (this.options.startHour || 0); h <= (this.options.endHour || 23); h++) {\r\n                Q.addOption(input, h.toString(), ((h < 10) ? ('0' + h) : h.toString()));\r\n            }\r\n\r\n            this.minutes = $('<select/>').addClass('editor s-TimeEditor minute').insertAfter(input);\r\n            this.minutes.change(() => this.element.trigger(\"change\"));\r\n\r\n            for (var m = 0; m <= 59; m += (this.options.intervalMinutes || 5)) {\r\n                Q.addOption(this.minutes, m.toString(), ((m < 10) ? ('0' + m) : m.toString()));\r\n            }\r\n        }\r\n\r\n        public get value(): number {\r\n            var hour = Q.toId(this.element.val());\r\n            var minute = Q.toId(this.minutes.val());\r\n            if (hour == null || minute == null) {\r\n                return null;\r\n            }\r\n            return hour * 60 + minute;\r\n        }\r\n\r\n        protected get_value(): number {\r\n            return this.value;\r\n        }\r\n\r\n        public set value(value: number) {\r\n            if (!value) {\r\n                if (this.options.noEmptyOption) {\r\n                    this.element.val(this.options.startHour);\r\n                    this.minutes.val('0');\r\n                }\r\n                else {\r\n                    this.element.val('');\r\n                    this.minutes.val('0');\r\n                }\r\n            }\r\n            else {\r\n                this.element.val(Math.floor(value / 60).toString());\r\n                this.minutes.val(value % 60);\r\n            }\r\n        }\r\n\r\n        protected set_value(value: number): void {\r\n            this.value = value;\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return this.element.hasClass('readonly');\r\n        }\r\n\r\n        set_readOnly(value: boolean): void {\r\n\r\n            if (value !== this.get_readOnly()) {\r\n                if (value) {\r\n                    this.element.addClass('readonly').attr('readonly', 'readonly');\r\n                }\r\n                else {\r\n                    this.element.removeClass('readonly').removeAttr('readonly');\r\n                }\r\n                Serenity.EditorUtils.setReadonly(this.minutes, value);\r\n            }\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n    \r\n    @Decorators.registerEditor('Serenity.EmailAddressEditor')\r\n    export class EmailAddressEditor extends Serenity.StringEditor {\r\n        constructor(input: JQuery) {\r\n            super(input);\r\n\r\n            input.attr('type', 'email')\r\n                .addClass('email');\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n    \r\n    export interface EmailEditorOptions {\r\n        domain?: string;\r\n        readOnlyDomain?: boolean;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.EmailEditor', [IStringValue, IReadOnly])\r\n    @Decorators.element('<input type=\"text\"/>')\r\n    export class EmailEditor extends Widget<EmailEditorOptions> {\r\n\r\n        constructor(input: JQuery, opt: EmailEditorOptions) {\r\n            super(input, opt);\r\n\r\n            EmailEditor.registerValidationMethods();\r\n\r\n            input.addClass('emailuser');\r\n\r\n            var spanAt = $('<span/>').text('@').addClass('emailat').insertAfter(input);\r\n\r\n            var domain = $('<input type=\"text\"/>').addClass('emaildomain').insertAfter(spanAt);\r\n            domain.bind('blur.' + this.uniqueName, function () {\r\n                var validator = domain.closest('form').data('validator');\r\n                if (validator != null) {\r\n                    validator.element(input[0]);\r\n                }\r\n            });\r\n\r\n            if (!Q.isEmptyOrNull(this.options.domain)) {\r\n                domain.val(this.options.domain);\r\n            }\r\n\r\n            if (this.options.readOnlyDomain) {\r\n                domain.attr('readonly', 'readonly').addClass('disabled').attr('tabindex', '-1');\r\n            }\r\n\r\n            input.bind('keypress.' + this.uniqueName, e => {\r\n                if (e.which === 64) {\r\n                    e.preventDefault();\r\n                    if (!this.options.readOnlyDomain) {\r\n                        domain.focus();\r\n                        domain.select();\r\n                    }\r\n                }\r\n            });\r\n\r\n            domain.bind('keypress.' + this.uniqueName, function (e1) {\r\n                if (e1.which === 64) {\r\n                    e1.preventDefault();\r\n                }\r\n            });\r\n\r\n            if (!this.options.readOnlyDomain) {\r\n                input.change(e2 => this.set_value(input.val()));\r\n            }\r\n        }\r\n\r\n        static registerValidationMethods(): void {\r\n            if (!$.validator || !$.validator.methods || $.validator.methods['emailuser'] != null)\r\n                return;\r\n\r\n            $.validator.addMethod('emailuser', function (value, element) {\r\n\r\n                var domain = $(element).nextAll('.emaildomain');\r\n                if (domain.length > 0 && domain.attr('readonly') == null) {\r\n\r\n                    if (this.optional(element) && this.optional(domain[0])) {\r\n                        return true;\r\n                    }\r\n\r\n                    return $.validator.methods.email.call(this, value + '@' + domain.val(), element);\r\n                }\r\n                else {\r\n                    return $.validator.methods.email.call(this, value + '@dummy.com', element);\r\n                }\r\n            }, Q.tryGetText(\"Validation.Email\") ?? $.validator.messages.email);\r\n        }\r\n\r\n        get_value(): string {\r\n            var domain = this.element.nextAll('.emaildomain');\r\n            var value = this.element.val();\r\n            var domainValue = domain.val();\r\n            if (Q.isEmptyOrNull(value)) {\r\n                if (this.options.readOnlyDomain || Q.isEmptyOrNull(domainValue)) {\r\n                    return '';\r\n                }\r\n                return '@' + domainValue;\r\n            }\r\n            return value + '@' + domainValue;\r\n        }\r\n\r\n        get value(): string {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: string): void {\r\n            var domain = this.element.nextAll('.emaildomain');\r\n            value = Q.trimToNull(value);\r\n            if (value == null) {\r\n                if (!this.options.readOnlyDomain)\r\n                    domain.val('');\r\n                this.element.val('');\r\n            }\r\n            else {\r\n                var parts = value.split('@');\r\n                if (parts.length > 1) {\r\n                    if (!this.options.readOnlyDomain) {\r\n                        domain.val(parts[1]);\r\n                        this.element.val(parts[0]);\r\n                    }\r\n                    else if (!Q.isEmptyOrNull(this.options.domain)) {\r\n                        if (parts[1] !== this.options.domain)\r\n                            this.element.val(value);\r\n                        else \r\n                            this.element.val(parts[0]);\r\n                    }\r\n                    else \r\n                        this.element.val(parts[0]);\r\n                }\r\n                else\r\n                    this.element.val(parts[0]);\r\n            }\r\n        }\r\n\r\n        set value(v: string) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            var domain = this.element.nextAll('.emaildomain');\r\n            return !(this.element.attr('readonly') == null &&\r\n                (!this.options.readOnlyDomain || domain.attr('readonly') == null));\r\n        }\r\n\r\n        set_readOnly(value: boolean): void {\r\n            var domain = this.element.nextAll('.emaildomain');\r\n            if (value) {\r\n                this.element.attr('readonly', 'readonly').addClass('readonly');\r\n                if (!this.options.readOnlyDomain) {\r\n                    domain.attr('readonly', 'readonly').addClass('readonly');\r\n                }\r\n            }\r\n            else {\r\n                this.element.removeAttr('readonly').removeClass('readonly');\r\n                if (!this.options.readOnlyDomain) {\r\n                    domain.removeAttr('readonly').removeClass('readonly');\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n    \r\n    @Decorators.registerEditor('Serenity.URLEditor', [IStringValue])\r\n    export class URLEditor extends StringEditor {\r\n\r\n        constructor(input: JQuery) {\r\n            super(input);\r\n\r\n            input.addClass(\"url\").attr(\"title\", \"URL should be entered in format: 'http://www.site.com/page'.\");\r\n\r\n            input.on(\"blur.\" + this.uniqueName, e => {\r\n                var validator = input.closest(\"form\").data(\"validator\") as JQueryValidation.Validator;\r\n                if (validator == null)\r\n                    return;\r\n\r\n                if (!input.hasClass(\"error\"))\r\n                    return;\r\n\r\n                var value = Q.trimToNull(input.val());\r\n                if (!value)\r\n                    return;\r\n\r\n                value = \"http://\" + value;\r\n\r\n                if ($.validator.methods['url'].call(validator, value, input[0]) == true) {\r\n                    input.val(value);\r\n                    validator.element(input);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface RadioButtonEditorOptions {\r\n        enumKey?: string;\r\n        enumType?: any;\r\n        lookupKey?: string;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.RadioButtonEditor', [IStringValue, IReadOnly])\r\n    @Decorators.element('<div/>')\r\n    export class RadioButtonEditor extends Widget<RadioButtonEditorOptions>\r\n        implements IReadOnly {\r\n\r\n        constructor(input: JQuery, opt: RadioButtonEditorOptions) {\r\n            super(input, opt);\r\n\r\n            if (Q.isEmptyOrNull(this.options.enumKey) &&\r\n                this.options.enumType == null &&\r\n                Q.isEmptyOrNull(this.options.lookupKey)) {\r\n                return;\r\n            }\r\n\r\n            if (!Q.isEmptyOrNull(this.options.lookupKey)) {\r\n                var lookup = Q.getLookup(this.options.lookupKey);\r\n                for (var item of lookup.items) {\r\n                    var textValue = item[lookup.textField];\r\n                    var text = (textValue == null ? '' : textValue.toString());\r\n                    var idValue = item[lookup.idField];\r\n                    var id = (idValue == null ? '' : idValue.toString());\r\n                    this.addRadio(id, text);\r\n                }\r\n            }\r\n            else {\r\n                var enumType = this.options.enumType || Serenity.EnumTypeRegistry.get(this.options.enumKey);\r\n                var enumKey = this.options.enumKey;\r\n                if (enumKey == null && enumType != null) {\r\n                    var enumKeyAttr = Q.getAttributes(enumType, Serenity.EnumKeyAttribute, false);\r\n                    if (enumKeyAttr.length > 0) {\r\n                        enumKey = enumKeyAttr[0].value;\r\n                    }\r\n                }\r\n\r\n                var values = Q.Enum.getValues(enumType);\r\n                for (var x of values) {\r\n                    var name = Q.Enum.toString(enumType, x);\r\n                    this.addRadio(x.toString(), Q.coalesce(Q.tryGetText(\r\n                        'Enums.' + enumKey + '.' + name), name));\r\n                }\r\n            }\r\n        }\r\n\r\n        protected addRadio(value: string, text: string) {\r\n            var label = $('<label/>').text(text);\r\n            $('<input type=\"radio\"/>').attr('name', this.uniqueName)\r\n                .attr('id', this.uniqueName + '_' + value)\r\n                .attr('value', value).prependTo(label);\r\n            label.appendTo(this.element);\r\n        }\r\n\r\n        get_value(): string {\r\n            return this.element.find('input:checked').first().val();\r\n        }\r\n\r\n        get value(): string {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: string): void {\r\n            if (value !== this.get_value()) {\r\n                var inputs = this.element.find('input');\r\n                var checks = inputs.filter(':checked');\r\n                if (checks.length > 0) {\r\n                    (checks[0] as HTMLInputElement).checked = false;\r\n                }\r\n                if (!Q.isEmptyOrNull(value)) {\r\n                    checks = inputs.filter('[value=' + value + ']');\r\n                    if (checks.length > 0) {\r\n                        (checks[0] as HTMLInputElement).checked = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        set value(v: string) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return this.element.attr('disabled') != null;\r\n        }\r\n\r\n        set_readOnly(value: boolean): void {\r\n            if (this.get_readOnly() !== value) {\r\n                if (value) {\r\n                    this.element.attr('disabled', 'disabled')\r\n                        .find('input').attr('disabled', 'disabled');\r\n                }\r\n                else {\r\n                    this.element.removeAttr('disabled')\r\n                        .find('input').removeAttr('disabled');\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}","\r\nnamespace Serenity {\r\n\r\n    export interface Select2CommonOptions {\r\n        allowClear?: boolean;\r\n        delimited?: boolean;\r\n        minimumResultsForSearch?: any;\r\n        multiple?: boolean;\r\n    }\r\n\r\n    export interface Select2FilterOptions {\r\n        cascadeFrom?: string;\r\n        cascadeField?: string;\r\n        cascadeValue?: any;\r\n        filterField?: string;\r\n        filterValue?: any;\r\n    }\r\n\r\n    export interface Select2InplaceAddOptions {\r\n        inplaceAdd?: boolean;\r\n        inplaceAddPermission?: string;\r\n        dialogType?: string;\r\n        autoComplete?: boolean;\r\n    }\r\n\r\n    export interface Select2EditorOptions extends Select2FilterOptions, Select2InplaceAddOptions, Select2CommonOptions {\r\n    }\r\n\r\n    export interface Select2SearchPromise {\r\n        abort?(): void;\r\n        catch?(callback: () => void): void;\r\n        fail?(callback: () => void): void;\r\n    }\r\n\r\n    export interface Select2SearchQuery {\r\n        searchTerm?: string;\r\n        idList?: string[];\r\n        skip?: number;\r\n        take?: number;\r\n        checkMore?: boolean;\r\n    }\r\n\r\n    export interface Select2SearchResult<TItem> {\r\n        items: TItem[];\r\n        more: boolean;\r\n    }\r\n\r\n    @Serenity.Decorators.registerClass('Serenity.Select2Editor',\r\n        [Serenity.ISetEditValue, Serenity.IGetEditValue, Serenity.IStringValue, Serenity.IReadOnly])\r\n    @Serenity.Decorators.element(\"<input type=\\\"hidden\\\"/>\")\r\n    export class Select2Editor<TOptions, TItem> extends Widget<TOptions> implements\r\n        Serenity.ISetEditValue, Serenity.IGetEditValue, Serenity.IStringValue, Serenity.IReadOnly {\r\n\r\n        private _items: Select2Item[];\r\n        private _itemById: Q.Dictionary<Select2Item>;\r\n        protected lastCreateTerm: string;\r\n\r\n        constructor(hidden: JQuery, opt?: any) {\r\n            super(hidden, opt);\r\n\r\n            this._items = [];\r\n            this._itemById = {};\r\n            var emptyItemText = this.emptyItemText();\r\n            if (emptyItemText != null) {\r\n                hidden.attr('placeholder', emptyItemText);\r\n            }\r\n            var select2Options = this.getSelect2Options();\r\n            hidden.select2(select2Options);\r\n            hidden.attr('type', 'text');\r\n\r\n            // for jquery validate to work\r\n            hidden.on('change.' + this.uniqueName, e => {\r\n                if (!$(e.target).hasClass('select2-change-triggered') && \r\n                    hidden.closest('form').data('validator')) {\r\n                        hidden.valid();\r\n                }\r\n            });\r\n\r\n            this.setCascadeFrom((this.options as Select2EditorOptions).cascadeFrom);\r\n\r\n            if (this.useInplaceAdd())\r\n                this.addInplaceCreate(Q.text('Controls.SelectEditor.InplaceAdd'), null);\r\n        }\r\n\r\n        destroy() {\r\n            if (this.element != null) {\r\n                this.element.select2('destroy');\r\n            }\r\n\r\n\t\t\tsuper.destroy();\r\n        }\r\n\r\n        protected hasAsyncSource(): boolean {\r\n            return false;\r\n        }\r\n\r\n        protected asyncSearch(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): Select2SearchPromise {\r\n            results({\r\n                items: [],\r\n                more: false\r\n            });\r\n            return null;\r\n        }\r\n\r\n        protected getTypeDelay() {\r\n            return Q.coalesce(this.options['typeDelay'], 500);\r\n        }\r\n\r\n        protected emptyItemText() {\r\n            return Q.coalesce(this.element.attr('placeholder'),\r\n                Q.text('Controls.SelectEditor.EmptyItemText'));\r\n        }\r\n\r\n        protected getPageSize(): number {\r\n            return this.options['pageSize'] ?? 100;\r\n        }\r\n\r\n        protected getIdField() {\r\n            return this.options['idField'];\r\n        }\r\n\r\n        protected itemId(item: TItem): string {\r\n            var value = item[this.getIdField()];\r\n            if (value == null)\r\n                return '';\r\n            return value.toString();\r\n        }\r\n\r\n        protected getTextField() {\r\n            return this.options['textField'] ?? this.getIdField();\r\n        }\r\n\r\n        protected itemText(item: TItem): string {\r\n            var value = item[this.getTextField()];\r\n            if (value == null)\r\n                return '';\r\n            return value.toString();\r\n        }\r\n\r\n        protected itemDisabled(item: TItem): boolean {\r\n            return false;\r\n        }\r\n\r\n        protected mapItem(item: TItem): Select2Item {\r\n            return {\r\n                id: this.itemId(item),\r\n                text: this.itemText(item),\r\n                disabled: this.itemDisabled(item),\r\n                source: item\r\n            };\r\n        }\r\n\r\n        protected mapItems(items: TItem[]): Select2Item[] {\r\n            return items.map(this.mapItem.bind(this));\r\n        }\r\n\r\n        protected allowClear() {\r\n            return (this.options as Select2EditorOptions).allowClear != null ?\r\n                !!(this.options as Select2EditorOptions).allowClear : this.emptyItemText() != null;\r\n        }\r\n\r\n        protected isMultiple() {\r\n            return !!(this.options as Select2EditorOptions).multiple;\r\n        }\r\n\r\n        protected getSelect2Options(): Select2Options {\r\n            var emptyItemText = this.emptyItemText();\r\n            var opt: Select2Options = {\r\n                multiple: this.isMultiple(),\r\n                placeHolder: (!Q.isEmptyOrNull(emptyItemText) ? emptyItemText : null),\r\n                allowClear: this.allowClear(),\r\n                createSearchChoicePosition: 'bottom'\r\n            }\r\n\r\n            if (this.hasAsyncSource()) {\r\n                var typeTimeout = 0;\r\n                var queryPromise: Select2SearchPromise = null;\r\n                opt.query = query => {\r\n                    var pageSize = this.getPageSize();\r\n                    var searchQuery: Select2SearchQuery = {\r\n                        searchTerm: Q.trimToNull(query.term),\r\n                        skip: (query.page - 1) * pageSize,\r\n                        take: pageSize,\r\n                        checkMore: true\r\n                    }\r\n\r\n                    queryPromise && queryPromise.abort && queryPromise.abort();\r\n                    queryPromise = null;\r\n\r\n                    if (typeTimeout != null)\r\n                        clearTimeout(typeTimeout);\r\n\r\n                    var select2 = $(this.element).data('select2');\r\n                    select2 && select2.search && select2.search.removeClass('select2-active');\r\n\r\n                    typeTimeout = setTimeout(() => {\r\n                        queryPromise && queryPromise.abort && queryPromise.abort();\r\n                        select2 && select2.search.addClass('select2-active');\r\n                        queryPromise = this.asyncSearch(searchQuery, result => {\r\n                            queryPromise = null;\r\n                            query.callback({\r\n                                results: this.mapItems(result.items),\r\n                                more: result.more\r\n                            });\r\n                        });\r\n                        (queryPromise && (queryPromise.catch || queryPromise.fail)).call(queryPromise, () => {\r\n                            queryPromise = null;\r\n                            select2 && select2.search && select2.search.removeClass('select2-active');\r\n                        });\r\n                    }, !query.term ? 0 : this.getTypeDelay());\r\n                }\r\n\r\n                var initPromise: Select2SearchPromise = null;\r\n                opt.initSelection = (element, callback) => {\r\n                    var val = element.val();\r\n                    if (val == null || val == '') {\r\n                        callback(null);\r\n                        return;\r\n                    }\r\n\r\n                    var isMultiple = this.isMultiple();\r\n                    var idList = isMultiple ? val.split(',') : [val]; \r\n                    var searchQuery = {\r\n                        idList: idList\r\n                    }\r\n\r\n                    initPromise && initPromise.abort && initPromise.abort();\r\n                    initPromise = this.asyncSearch(searchQuery, result => {\r\n                        initPromise = null;\r\n                        if (isMultiple) {\r\n                            var items = (result.items || []).map(x => this.mapItem(x));\r\n                            this._itemById = this._itemById || {};\r\n                            for (var item of items)\r\n                                this._itemById[item.id] = item;\r\n                            if (this.isAutoComplete &&\r\n                                items.length != idList.length) {\r\n                                for (var v of idList) {\r\n                                    if (!Q.any(items, z => z.id == v)) {\r\n                                        items.push({\r\n                                            id: v,\r\n                                            text: v\r\n                                        });\r\n                                    }\r\n                                }\r\n                            }\r\n                            callback(items);\r\n                        }\r\n                        else if (!result.items || !result.items.length) {\r\n                            if (this.isAutoComplete) {\r\n                                callback({\r\n                                    id: val,\r\n                                    text: val\r\n                                });\r\n                            }\r\n                            else\r\n                                callback(null);\r\n                        }\r\n                        else {\r\n                            var item = this.mapItem(result.items[0]);\r\n                            this._itemById = this._itemById || {};\r\n                            this._itemById[item.id] = item;\r\n                            callback(item);\r\n                        }\r\n                    });\r\n                    (initPromise && (initPromise.catch || initPromise.fail)).call(initPromise, () => {\r\n                        initPromise = null;\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                opt.data = this._items;\r\n                opt.query = (query) => {\r\n                    var items = Select2Editor.filterByText(this._items, x => x.text, query.term);\r\n                    var pageSize = this.getPageSize();\r\n                    query.callback({\r\n                        results: items.slice((query.page - 1) * pageSize, query.page * pageSize),\r\n                        more: items.length >= query.page * pageSize\r\n                    });\r\n                }\r\n                opt.initSelection = (element, callback) => {\r\n                    var val = element.val();\r\n                    var isAutoComplete = this.isAutoComplete();\r\n                    if (this.isMultiple()) {\r\n                        var list = [];\r\n                        for (var z of val.split(',')) {\r\n                            var item2 = this._itemById[z];\r\n                            if (item2 == null && isAutoComplete) {\r\n                                item2 = { id: z, text: z };\r\n                                this.addItem(item2);\r\n                            }\r\n                            if (item2 != null) {\r\n                                list.push(item2);\r\n                            }\r\n                        }\r\n                        callback(list);\r\n                        return;\r\n                    }\r\n                    var it = this._itemById[val];\r\n                    if (it == null && isAutoComplete) {\r\n                        it = { id: val, text: val };\r\n                        this.addItem(it);\r\n                    }\r\n                    callback(it);\r\n                }\r\n            }\r\n\r\n            if ((this.options as Select2EditorOptions).minimumResultsForSearch != null)\r\n                opt.minimumResultsForSearch = (this.options as Select2EditorOptions).minimumResultsForSearch;\r\n\r\n            if (this.isAutoComplete() || this.useInplaceAdd())\r\n                opt.createSearchChoice = this.getCreateSearchChoice(null);\r\n\r\n            return opt;\r\n        }\r\n\r\n        get_delimited() {\r\n            return !!(this.options as Select2EditorOptions).delimited;\r\n        }\r\n\r\n        public get items(): Select2Item[] {\r\n            if (this.hasAsyncSource())\r\n                throw new Error(\"Can't read items property of an async select editor!\");\r\n\r\n            return this._items || [];\r\n        }\r\n\r\n        public set items(value: Select2Item[]) {\r\n            if (this.hasAsyncSource())\r\n                throw new Error(\"Can't set items of an async select editor!\");\r\n\r\n            this._items = value || [];\r\n            this._itemById = {};\r\n            for (var item of this._items)\r\n                this._itemById[item.id] = item;\r\n        }\r\n\r\n        protected get itemById(): Q.Dictionary<Select2Item> {\r\n            if (this.hasAsyncSource())\r\n                throw new Error(\"Can't read items property of an async select editor!\");\r\n\r\n            return this._itemById;\r\n        }\r\n\r\n        protected set itemById(value: Q.Dictionary<Select2Item>) {\r\n            if (this.hasAsyncSource())\r\n                throw new Error(\"Can't set itemById of an async select editor!\");\r\n\r\n            this._itemById = value || {};\r\n        }\r\n\r\n        public clearItems() {\r\n            if (this.hasAsyncSource())\r\n                throw new Error(\"Can't clear items of an async select editor!\");\r\n\r\n            this._items.length = 0;\r\n            this._itemById = {};\r\n        }\r\n\r\n        public addItem(item: Select2Item) {\r\n            if (this.hasAsyncSource())\r\n                throw new Error(\"Can't add item to an async select editor!\");\r\n\r\n            this._items.push(item);\r\n            this._itemById[item.id] = item;\r\n        }\r\n\r\n        public addOption(key: string, text: string, source?: any, disabled?: boolean) {\r\n            this.addItem({\r\n                id: key,\r\n                text: text,\r\n                source: source,\r\n                disabled: disabled\r\n            });\r\n        }\r\n\r\n        protected addInplaceCreate(addTitle: string, editTitle: string) {\r\n            var self = this;\r\n            addTitle = Q.coalesce(addTitle, Q.text('Controls.SelectEditor.InplaceAdd'));\r\n            editTitle = Q.coalesce(editTitle, Q.text('Controls.SelectEditor.InplaceEdit'));\r\n            var inplaceButton = $('<a><b/></a>')\r\n                .addClass('inplace-button inplace-create')\r\n                .attr('title', addTitle)\r\n                .insertAfter(this.element).click(function (e) {\r\n                    self.inplaceCreateClick(e);\r\n                });\r\n\r\n            this.get_select2Container().add(this.element).addClass('has-inplace-button');\r\n\r\n            this.element.change(() => {\r\n                var isNew = this.isMultiple() || Q.isEmptyOrNull(this.get_value());\r\n                inplaceButton.attr('title', (isNew ? addTitle : editTitle)).toggleClass('edit', !isNew);\r\n            });\r\n\r\n            this.element.change((e) => {\r\n                if ($(e.target).hasClass('select2-change-triggered'))\r\n                    return;\r\n                if (this.isMultiple()) {\r\n                    var values = this.get_values();\r\n                    if (values.length > 0 && values[values.length - 1] == (-2147483648).toString()) {\r\n                        this.set_values(values.slice(0, values.length - 1));\r\n                        this.inplaceCreateClick(e);\r\n                    }\r\n                }\r\n                else if (this.get_value() == (-2147483648).toString()) {\r\n                    this.set_value(null);\r\n                    this.inplaceCreateClick(e);\r\n                }\r\n            });\r\n\r\n            if (this.isMultiple()) {\r\n                this.get_select2Container().on('dblclick.' + this.uniqueName, '.select2-search-choice', (e3: JQueryEventObject) => {\r\n                    var q = $(e3.target);\r\n                    if (!q.hasClass('select2-search-choice')) {\r\n                        q = q.closest('.select2-search-choice');\r\n                    }\r\n                    var index = q.index();\r\n                    var values1 = this.get_values();\r\n                    if (index < 0 || index >= this.get_values().length) {\r\n                        return;\r\n                    }\r\n                    e3['editItem'] = values1[index];\r\n                    this.inplaceCreateClick(e3);\r\n                });\r\n            }\r\n        }\r\n\r\n        protected useInplaceAdd(): boolean {\r\n            return !this.isAutoComplete() &&\r\n                (this.options as Select2EditorOptions).inplaceAdd &&\r\n                ((this.options as Select2EditorOptions).inplaceAddPermission == null ||\r\n                    Q.Authorization.hasPermission((this.options as Select2EditorOptions).inplaceAddPermission));\r\n        }\r\n\r\n        protected isAutoComplete(): boolean {\r\n            return !!(this.options as Select2EditorOptions).autoComplete;\r\n        }\r\n\r\n        public getCreateSearchChoice(getName: (z: any) => string) {\r\n            return (s: string) => {\r\n\r\n                this.lastCreateTerm = s;\r\n                s = Q.coalesce(Select2.util.stripDiacritics(s), '').toLowerCase();\r\n\r\n                if (Q.isTrimmedEmpty(s)) {\r\n                    return null;\r\n                }\r\n\r\n                var isAsyncSource = false;\r\n\r\n                if (Q.any(this._items || [], (x: Select2Item) => {\r\n                        var text = getName ? getName(x.source) : x.text;\r\n                        return Select2.util.stripDiacritics(Q.coalesce(text, '')).toLowerCase() == s;\r\n                }))\r\n                    return null;\r\n\r\n                if (!Q.any(this._items || [], x1 => {\r\n                    return Q.coalesce(Select2.util.stripDiacritics(x1.text), '').toLowerCase().indexOf(s) !== -1;\r\n                })) {\r\n                    if (this.isAutoComplete()) {\r\n                        return {\r\n                            id: this.lastCreateTerm,\r\n                            text: this.lastCreateTerm\r\n                        };\r\n                    }\r\n\r\n                    return {\r\n                        id: (-2147483648).toString(),\r\n                        text: Q.text('Controls.SelectEditor.NoResultsClickToDefine')\r\n                    };\r\n                }\r\n\r\n                if (this.isAutoComplete()) {\r\n                    return {\r\n                        id: this.lastCreateTerm,\r\n                        text: this.lastCreateTerm\r\n                    };\r\n                }\r\n\r\n                return {\r\n                    id: (-2147483648).toString(),\r\n                    text: Q.text('Controls.SelectEditor.ClickToDefine')\r\n                };\r\n            }\r\n        }\r\n\r\n        setEditValue(source: any, property: PropertyItem) {\r\n            var val = source[property.name];\r\n            if(Q.isArray(val)) {\r\n                this.set_values(val);\r\n            }\r\n\t\t\telse {\r\n                this.set_value((val == null ? null : val.toString()));\r\n            }\r\n        }\r\n\r\n        getEditValue(property: PropertyItem, target: any) {\r\n            if (!this.isMultiple() || this.get_delimited()) {\r\n                target[property.name] = this.get_value();\r\n            }\r\n\t\t\telse {\r\n                target[property.name] = this.get_values();\r\n            }\r\n        }\r\n\r\n        protected get_select2Container(): JQuery {\r\n            return this.element.prevAll('.select2-container');\r\n        }\r\n\r\n        protected get_items() {\r\n            return this.items;\r\n        }\r\n\r\n        protected get_itemByKey() {\r\n            return this.itemById;\r\n        }\r\n\r\n        public static filterByText<TItem>(items: TItem[], getText: (item: TItem) => string, term: string): TItem[] {\r\n            if (term == null || term.length == 0)\r\n                return items;\r\n\r\n            term = Select2.util.stripDiacritics(term).toUpperCase();\r\n\r\n            var contains: TItem[] = [];\r\n            function filter(item: TItem): boolean {\r\n                var text = getText(item);\r\n                if (text == null || !text.length)\r\n                    return false;\r\n                text = Select2.util.stripDiacritics(text).toUpperCase();\r\n                if (Q.startsWith(text, term))\r\n                    return true;\r\n                if (text.indexOf(term) >= 0)\r\n                    contains.push(item);\r\n                return false;\r\n            }\r\n\r\n            return items.filter(filter).concat(contains);\r\n        }\r\n\r\n        get_value() {\r\n            var val;\r\n            if (this.element.data('select2')) {\r\n                val = this.element.select2('val');\r\n                if (val != null && Q.isArray(val)) {\r\n                    return val.join(',');\r\n                }\r\n            }\r\n            else\r\n                val = this.element.val();\r\n\r\n\t\t\treturn val;\r\n        }\r\n\r\n        get value(): string {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: string) {\r\n\r\n            if (value != this.get_value()) {\r\n                var val: any = value;\r\n                if (!Q.isEmptyOrNull(value) && this.isMultiple()) {\r\n                    val = value.split(String.fromCharCode(44)).map(function (x) {\r\n                        return Q.trimToNull(x);\r\n                    }).filter(function (x1) {\r\n                        return x1 != null;\r\n                    });\r\n                }\r\n\r\n                var el = this.element;\r\n                el.select2('val', val);\r\n                el.data('select2-change-triggered', true);\r\n                try {\r\n                    el.triggerHandler('change')\r\n                } finally {\r\n                    el.data('select2-change-triggered', false);\r\n                }\r\n\r\n                this.updateInplaceReadOnly();\r\n            }\r\n        }\r\n\r\n        set value(v: string) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        get selectedItem(): TItem {\r\n            let selectedValue = this.get_value();\r\n            if (selectedValue && this._itemById) {\r\n                let item = this._itemById[selectedValue];\r\n                if (item)\r\n                    return item.source;\r\n            }\r\n            return null;\r\n        }\r\n\r\n        get selectedItems(): TItem[] {\r\n            let selectedValues = this.values;\r\n            var result = [];\r\n            for (var value of selectedValues) {\r\n                if (value && this._itemById) {\r\n                    let item = this._itemById[value];\r\n                    if (item && item.source)\r\n                        result.push(item.source);\r\n                    else\r\n                        result.push(null);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\r\n        protected get_values(): string[] {\r\n\r\n            var val = this.element.select2('val');\r\n            if (val == null) {\r\n                return [];\r\n            }\r\n\r\n\t\t\tif (Q.isArray(val)) {\r\n                return val;\r\n            }\r\n\r\n            var str = val;\r\n            if (Q.isEmptyOrNull(str)) {\r\n                return [];\r\n            }\r\n\r\n\t\t\treturn [str];\r\n        }\r\n\r\n        get values(): string[] {\r\n            return this.get_values();\r\n        }\r\n\r\n        protected set_values(value: string[]) {\r\n\r\n            if (value == null || value.length === 0) {\r\n                this.set_value(null);\r\n                return;\r\n            }\r\n\r\n\t\t\tthis.set_value(value.join(','));\r\n        }\r\n\r\n        set values(value: string[]) {\r\n            this.set_values(value);\r\n        }\r\n\r\n        protected get_text(): string {\r\n            return Q.coalesce(this.element.select2('data'), {}).text;\r\n        }\r\n\r\n        get text(): string {\r\n            return this.get_text();\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return !Q.isEmptyOrNull(this.element.attr('readonly'));\r\n        }\r\n\r\n        get readOnly(): boolean {\r\n            return this.get_readOnly();\r\n        }\r\n\r\n        private updateInplaceReadOnly(): void {\r\n            var readOnly = this.get_readOnly() &&\r\n                (this.isMultiple() || !this.value);\r\n\r\n            this.element.nextAll('.inplace-create')\r\n                .attr('disabled', (readOnly ? 'disabled' : ''))\r\n                .css('opacity', (readOnly ? '0.1' : ''))\r\n                .css('cursor', (readOnly ? 'default' : ''));\r\n        }\r\n\r\n        set_readOnly(value: boolean) {\r\n            if (value !== this.get_readOnly()) {\r\n                this.element.attr(\"readonly\", value ? \"readonly\" : null);\r\n                this.updateInplaceReadOnly();\r\n            }\r\n        }\r\n\r\n        set readOnly(value: boolean) {\r\n            this.set_readOnly(value);\r\n        }\r\n\r\n        protected getCascadeFromValue(parent: Serenity.Widget<any>) {\r\n            return Serenity.EditorUtils.getValue(parent);\r\n        }\r\n\r\n        protected cascadeLink: Serenity.CascadedWidgetLink<Widget<any>>;\r\n\r\n        protected setCascadeFrom(value: string) {\r\n\r\n            if (Q.isEmptyOrNull(value)) {\r\n                if (this.cascadeLink != null) {\r\n                    this.cascadeLink.set_parentID(null);\r\n                    this.cascadeLink = null;\r\n                }\r\n                (this.options as Select2EditorOptions).cascadeFrom = null;\r\n                return;\r\n            }\r\n\r\n            this.cascadeLink = new Serenity.CascadedWidgetLink<Widget<any>>(Widget, this, p => {\r\n                this.set_cascadeValue(this.getCascadeFromValue(p));\r\n            });\r\n\r\n            this.cascadeLink.set_parentID(value);\r\n            (this.options as Select2EditorOptions).cascadeFrom = value;\r\n        }\r\n\r\n        protected get_cascadeFrom(): string {\r\n            return (this.options as Select2EditorOptions).cascadeFrom;\r\n        }\r\n\r\n        get cascadeFrom(): string {\r\n            return this.get_cascadeFrom();\r\n        }\r\n\r\n        protected set_cascadeFrom(value: string) {\r\n            if (value !== (this.options as Select2EditorOptions).cascadeFrom) {\r\n                this.setCascadeFrom(value);\r\n                this.updateItems();\r\n            }\r\n        }\r\n\r\n        set cascadeFrom(value: string) {\r\n            this.set_cascadeFrom(value);\r\n        }\r\n\r\n        protected get_cascadeField() {\r\n            return Q.coalesce((this.options as Select2EditorOptions).cascadeField, (this.options as Select2EditorOptions).cascadeFrom);\r\n        }\r\n\r\n        get cascadeField(): string {\r\n            return this.get_cascadeField();\r\n        }\r\n\r\n        protected set_cascadeField(value: string) {\r\n            (this.options as Select2EditorOptions).cascadeField = value;\r\n        }\r\n\r\n        set cascadeField(value: string) {\r\n            this.set_cascadeField(value);\r\n        }\r\n\r\n        protected get_cascadeValue(): any {\r\n            return (this.options as Select2EditorOptions).cascadeValue;\r\n        }\r\n\r\n        get cascadeValue(): any {\r\n            return this.get_cascadeValue();\r\n        }\r\n\r\n        protected set_cascadeValue(value: any) {\r\n            if ((this.options as Select2EditorOptions).cascadeValue !== value) {\r\n                (this.options as Select2EditorOptions).cascadeValue = value;\r\n                this.set_value(null);\r\n                this.updateItems();\r\n            }\r\n        }\r\n\r\n        set cascadeValue(value: any) {\r\n            this.set_cascadeValue(value);\r\n        }\r\n\r\n        protected get_filterField() {\r\n            return (this.options as Select2EditorOptions).filterField;\r\n        }\r\n\r\n        get filterField(): string {\r\n            return this.get_filterField();\r\n        }\r\n\r\n        protected set_filterField(value: string) {\r\n            (this.options as Select2EditorOptions).filterField = value;\r\n        }\r\n\r\n        set filterField(value: string) {\r\n            this.set_filterField(value);\r\n        }\r\n\r\n        protected get_filterValue(): any {\r\n            return (this.options as Select2EditorOptions).filterValue;\r\n        }\r\n\r\n        get filterValue(): any {\r\n            return this.get_filterValue();\r\n        }\r\n\r\n        protected set_filterValue(value: any) {\r\n            if ((this.options as Select2EditorOptions).filterValue !== value) {\r\n                (this.options as Select2EditorOptions).filterValue = value;\r\n                this.set_value(null);\r\n                this.updateItems();\r\n            }\r\n        }\r\n\r\n        set filterValue(value: any) {\r\n            this.set_filterValue(value);\r\n        }\r\n\r\n        protected cascadeItems(items: TItem[]) {\r\n\r\n            var val = this.get_cascadeValue();\r\n\r\n            if (val == null || val === '') {\r\n\r\n                if (!Q.isEmptyOrNull(this.get_cascadeField())) {\r\n                    return [];\r\n                }\r\n\r\n                return items;\r\n            }\r\n\r\n            var key = val.toString();\r\n            var fld = this.get_cascadeField();\r\n\r\n            return items.filter(x => {\r\n                var itemKey = Q.coalesce(x[fld], Serenity.ReflectionUtils.getPropertyValue(x, fld));\r\n                return !!(itemKey != null && itemKey.toString() === key);\r\n            });\r\n        }\r\n\r\n        protected filterItems(items: TItem[]) {\r\n            var val = this.get_filterValue();\r\n\r\n            if (val == null || val === '') {\r\n                return items;\r\n            }\r\n\r\n            var key = val.toString();\r\n            var fld = this.get_filterField();\r\n\r\n            return items.filter(x => {\r\n                var itemKey = Q.coalesce(x[fld], Serenity.ReflectionUtils.getPropertyValue(x, fld));\r\n                return !!(itemKey != null && itemKey.toString() === key);\r\n            });\r\n        }\r\n\r\n        protected updateItems() {\r\n        }\r\n\r\n        protected getDialogTypeKey() {\r\n            if ((this.options as Select2EditorOptions).dialogType != null) {\r\n                return (this.options as Select2EditorOptions).dialogType;\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        protected createEditDialog(callback: (dlg: IEditDialog) => void) {\r\n            var dialogTypeKey = this.getDialogTypeKey();\r\n            var dialogType = Serenity.DialogTypeRegistry.get(dialogTypeKey);\r\n            Serenity.Widget.create({\r\n                type: dialogType,\r\n                init: x => callback(x as any)\r\n            });\r\n        }\r\n\r\n        public onInitNewEntity: (entity: TItem) => void;\r\n\r\n        protected initNewEntity(entity: TItem) {\r\n            if (!Q.isEmptyOrNull(this.get_cascadeField())) {\r\n                entity[this.get_cascadeField()] = this.get_cascadeValue();\r\n            }\r\n\r\n            if (!Q.isEmptyOrNull(this.get_filterField())) {\r\n                entity[this.get_filterField()] = this.get_filterValue();\r\n            }\r\n\r\n            if (this.onInitNewEntity != null) {\r\n                this.onInitNewEntity(entity);\r\n            }\r\n        }\r\n\r\n        protected setEditDialogReadOnly(dialog: any): void {\r\n            // an ugly workaround\r\n            dialog.element && dialog.element\r\n                .find('.tool-button.delete-button')\r\n                .addClass('disabled')\r\n                .unbind('click');\r\n        }\r\n\r\n        protected editDialogDataChange() {\r\n        }\r\n\r\n        protected setTermOnNewEntity(entity: TItem, term: string) {\r\n        }\r\n\r\n        protected inplaceCreateClick(e: JQueryEventObject) {\r\n\r\n            if (this.get_readOnly() &&\r\n                ((this.isMultiple() && !e['editItem']) || !this.value))\r\n                return;\r\n\r\n            this.createEditDialog(dialog => {\r\n\r\n                if (this.get_readOnly())\r\n                    this.setEditDialogReadOnly(dialog);\r\n\r\n                Serenity.SubDialogHelper.bindToDataChange(dialog, this, (x, dci) => {\r\n                    this.editDialogDataChange();\r\n                    this.updateItems();\r\n                    this.lastCreateTerm = null;\r\n\r\n                    if ((dci.type === 'create' || dci.type === 'update') &&\r\n                        dci.entityId != null) {\r\n                        var id = dci.entityId.toString();\r\n\r\n                        if (this.isMultiple()) {\r\n                            var values = this.get_values().slice();\r\n                            if (values.indexOf(id) < 0) {\r\n                                values.push(id);\r\n                            }\r\n                            this.set_values(null);\r\n                            this.set_values(values.slice());\r\n                        }\r\n                        else {\r\n                            this.set_value(null);\r\n                            this.set_value(id);\r\n                        }\r\n                    }\r\n                    else if (this.isMultiple() && dci.type === 'delete' &&\r\n                        dci.entityId != null) {\r\n                        var id1 = dci.entityId.toString();\r\n                        var values1 = this.get_values().slice();\r\n\r\n                        var idx1 = values1.indexOf(id1);\r\n                        if (idx1 >= 0)\r\n                            values1.splice(idx1, 1);\r\n\r\n                        this.set_values(values1.slice());\r\n                    }\r\n                    else if (!this.isMultiple()) {\r\n                        this.set_value(null);\r\n                    }\r\n                }, true);\r\n\r\n                var editItem = e['editItem'];\r\n                if (editItem != null) {\r\n                    dialog.load(editItem, () => {\r\n                        (dialog as any).dialogOpen(this.openDialogAsPanel);\r\n                    }, null);\r\n                }\r\n                else if (this.isMultiple() || Q.isEmptyOrNull(this.get_value())) {\r\n                    var entity: TItem = {} as any;\r\n                    this.setTermOnNewEntity(entity, Q.trimToEmpty(this.lastCreateTerm));\r\n                    this.initNewEntity(entity);\r\n                    dialog.load(entity, () => {\r\n                        (dialog as any).dialogOpen(this.openDialogAsPanel);\r\n                    }, null);\r\n                }\r\n                else {\r\n                    dialog.load(this.get_value(), () => {\r\n                        (dialog as any).dialogOpen(this.openDialogAsPanel);\r\n                    }, null);\r\n                }\r\n            });\r\n        }\r\n\r\n        public openDialogAsPanel: boolean;\r\n    }\r\n}","\r\nnamespace Serenity {\r\n\r\n    @Serenity.Decorators.registerClass('Serenity.SelectEditor')\r\n    export class SelectEditor extends Select2Editor<SelectEditorOptions, Select2Item> {\r\n        constructor(hidden: JQuery, opt?: SelectEditorOptions) {\r\n            super(hidden, opt);\r\n            this.updateItems();\r\n        }\r\n\r\n        getItems() {\r\n            return this.options.items || [];\r\n        }\r\n\r\n        protected emptyItemText() {\r\n            if (!Q.isEmptyOrNull(this.options.emptyOptionText)) {\r\n                return this.options.emptyOptionText;\r\n            }\r\n            return super.emptyItemText();\r\n        }\r\n\r\n        updateItems() {\r\n            var items = this.getItems();\r\n            this.clearItems();\r\n\r\n            if (items.length > 0) {\r\n                var isStrings = typeof (items[0]) === 'string';\r\n                for (var item of items) {\r\n                    var key = isStrings ? item : item[0];\r\n                    var text = isStrings ? item : Q.coalesce(item[1], item[0]);\r\n                    this.addOption(key, text, item, false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    export interface SelectEditorOptions extends Select2CommonOptions {\r\n        items?: any[];\r\n        emptyOptionText?: string;\r\n    }\r\n}","namespace Serenity {\r\n\r\n    @Decorators.registerEditor('Serenity.DateYearEditor')\r\n    export class DateYearEditor extends SelectEditor {\r\n\r\n        constructor(hidden: JQuery, opt: DateYearEditorOptions) {\r\n            super(hidden, opt);\r\n\r\n            this.updateItems();\r\n        }\r\n\r\n        getItems() {\r\n            var opt = this.options as DateYearEditorOptions;\r\n\r\n            if (opt.items != null && opt.items.length >= 1) {\r\n                return opt.items;\r\n            }\r\n\r\n            var years = [];\r\n            var minYear = (new Date()).getFullYear();\r\n            var maxYear = (new Date()).getFullYear();\r\n\r\n            opt.minYear = Q.coalesce(opt.minYear, '-10').toString();\r\n            if (Q.startsWith(opt.minYear, '-')) {\r\n                minYear -= parseInt(opt.minYear.substr(1), 10);\r\n            }\r\n            else if (Q.startsWith(opt.minYear, '+')) {\r\n                minYear += parseInt(opt.minYear.substr(1), 10);\r\n            }\r\n            else {\r\n                minYear = parseInt(opt.minYear, 10);\r\n            }\r\n\r\n            opt.maxYear = Q.coalesce(opt.maxYear, '+10').toString();\r\n            if (Q.startsWith(opt.maxYear, '-')) {\r\n                maxYear -= parseInt(opt.maxYear.substr(1), 10);\r\n            }\r\n            else if (Q.startsWith(opt.maxYear, '+')) {\r\n                maxYear += parseInt(opt.maxYear.substr(1), 10);\r\n            }\r\n            else {\r\n                maxYear = parseInt(opt.maxYear, 10);\r\n            }\r\n\r\n            if (opt.descending) {\r\n                for (var i = maxYear; i >= minYear; i--) {\r\n                    years.push(i.toString());\r\n                }\r\n            }\r\n            else {\r\n                for (var i1 = minYear; i1 <= maxYear; i1++) {\r\n                    years.push(i1.toString());\r\n                }\r\n            }\r\n\r\n            return years;\r\n        }\r\n    }\r\n\r\n    export interface DateYearEditorOptions extends SelectEditorOptions {\r\n        minYear?: string;\r\n        maxYear?: string;\r\n        descending?: boolean;\r\n    }\r\n\r\n}","namespace Serenity {\r\n    \r\n    export interface EnumEditorOptions extends Select2CommonOptions {\r\n        enumKey?: string;\r\n        enumType?: any;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.EnumEditor')\r\n    export class EnumEditor extends Select2Editor<EnumEditorOptions, Select2Item> {\r\n        constructor(hidden: JQuery, opt: EnumEditorOptions) {\r\n            super(hidden, opt);\r\n            this.updateItems();\r\n        }\r\n\r\n        protected updateItems(): void {\r\n            this.clearItems();\r\n\r\n            var enumType = this.options.enumType || Serenity.EnumTypeRegistry.get(this.options.enumKey);\r\n            var enumKey = this.options.enumKey;\r\n\r\n            if (enumKey == null && enumType != null) {\r\n                var enumKeyAttr = Q.getAttributes(enumType, Serenity.EnumKeyAttribute, false);\r\n                if (enumKeyAttr.length > 0) {\r\n                    enumKey = enumKeyAttr[0].value;\r\n                }\r\n            }\r\n\r\n            var values = Q.Enum.getValues(enumType);\r\n            for (var x of values) {\r\n                var name = Q.Enum.toString(enumType, x);\r\n                this.addOption(parseInt(x, 10).toString(),\r\n                    Q.coalesce(Q.tryGetText('Enums.' + enumKey + '.' + name), name), null, false);\r\n            }\r\n        }\r\n\r\n        protected allowClear() {\r\n            return Q.coalesce(this.options.allowClear, true);\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface LookupEditorOptions extends Select2EditorOptions {\r\n        lookupKey?: string;\r\n        async?: boolean;\r\n    }\r\n\r\n    @Serenity.Decorators.registerEditor(\"Serenity.LookupEditorBase\")\r\n    export class LookupEditorBase<TOptions extends LookupEditorOptions, TItem> extends Select2Editor<TOptions, TItem> {\r\n\r\n        constructor(input: JQuery, opt?: TOptions) {\r\n            super(input, opt);\r\n\r\n            if (!this.hasAsyncSource()) {\r\n                this.updateItems();\r\n                var self = this;\r\n                Q.ScriptData.bindToChange('Lookup.' + this.getLookupKey(), this.uniqueName, function () {\r\n                    self.updateItems();\r\n                });\r\n            }\r\n        }\r\n\r\n        hasAsyncSource(): boolean {\r\n            return !!this.options.async;\r\n        }\r\n\r\n        destroy(): void {\r\n            if (!this.hasAsyncSource())\r\n                Q.ScriptData.unbindFromChange(this.uniqueName);\r\n\r\n            super.destroy();\r\n        }\r\n\r\n        protected getLookupKey(): string {\r\n            if (this.options.lookupKey != null) {\r\n                return this.options.lookupKey;\r\n            }\r\n\r\n            var key = Q.getTypeFullName(Q.getInstanceType(this));\r\n\r\n            var idx = key.indexOf('.');\r\n            if (idx >= 0) {\r\n                key = key.substring(idx + 1);\r\n            }\r\n\r\n            if (Q.endsWith(key, 'Editor')) {\r\n                key = key.substr(0, key.length - 6);\r\n            }\r\n\r\n            return key;\r\n        }\r\n\r\n        protected lookup: Q.Lookup<TItem>;\r\n\r\n        protected getLookupAsync(): PromiseLike<Q.Lookup<TItem>> {\r\n            return Q.getLookupAsync<TItem>(this.getLookupKey());\r\n        }\r\n\r\n        protected getLookup(): Q.Lookup<TItem> {\r\n            return Q.getLookup<TItem>(this.getLookupKey());\r\n        }\r\n\r\n        protected getItems(lookup: Q.Lookup<TItem>) {\r\n            return this.filterItems(this.cascadeItems(lookup.items));\r\n        }\r\n\r\n        protected getIdField() {\r\n            return this.lookup != null ? this.lookup.idField : super.getIdField();\r\n        }\r\n\r\n        protected getItemText(item: TItem, lookup: Q.Lookup<TItem>) {\r\n            if (lookup == null)\r\n                return super.itemText(item);\r\n\r\n            var textValue = lookup.textFormatter ? lookup.textFormatter(item) : item[lookup.textField];\r\n            return textValue == null ? '' : textValue.toString();\r\n        }\r\n\r\n        protected mapItem(item: TItem): Select2Item {\r\n            return {\r\n                id: this.itemId(item),\r\n                text: this.getItemText(item, this.lookup),\r\n                disabled: this.getItemDisabled(item, this.lookup),\r\n                source: item\r\n            };\r\n        }\r\n\r\n        protected getItemDisabled(item: TItem, lookup: Q.Lookup<TItem>) {\r\n            return super.itemDisabled(item);\r\n        }\r\n\r\n        public updateItems() {\r\n            this.clearItems();\r\n            this.lookup = this.getLookup();\r\n            var items = this.getItems(this.lookup);\r\n            for (var item of items)\r\n                this.addItem(this.mapItem(item));\r\n        }\r\n\r\n        protected asyncSearch(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): Select2SearchPromise {\r\n            return this.getLookupAsync().then(lookup => {\r\n                this.lookup = lookup;\r\n\r\n                var items = this.getItems(this.lookup);\r\n\r\n                if (query.idList != null) {\r\n                    items = items.filter(x => query.idList.indexOf(this.itemId(x)) >= 0);\r\n                }\r\n\r\n                function getText(item: TItem) {\r\n                    return this.getItemText(item, this.lookup);\r\n                }\r\n\r\n                items = Select2Editor.filterByText(items, getText.bind(this), query.searchTerm);\r\n\r\n                results({\r\n                    items: items.slice(query.skip, query.take),\r\n                    more: items.length >= query.take\r\n                });\r\n            }) as any;\r\n        }\r\n\r\n        protected getDialogTypeKey() {\r\n            var dialogTypeKey = super.getDialogTypeKey();\r\n            if (dialogTypeKey)\r\n                return dialogTypeKey;\r\n\r\n            return this.getLookupKey();\r\n        }\r\n\r\n        protected setCreateTermOnNewEntity(entity: TItem, term: string) {\r\n            entity[this.getLookup().textField] = term;\r\n        }\r\n\r\n        protected editDialogDataChange() {\r\n            Q.reloadLookup(this.getLookupKey());\r\n        }\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.LookupEditor')\r\n    export class LookupEditor extends LookupEditorBase<LookupEditorOptions, any> {\r\n        constructor(hidden: JQuery, opt?: LookupEditorOptions) {\r\n            super(hidden, opt);\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface ServiceLookupEditorOptions extends Select2EditorOptions {\r\n        service?: string;\r\n        idField: string;\r\n        textField: string;\r\n        pageSize?: number;\r\n        minimumResultsForSearch?: any;\r\n        sort: string[];\r\n        columnSelection?: Serenity.ColumnSelection;\r\n        includeColumns?: string[];\r\n        excludeColumns?: string[];\r\n        includeDeleted?: boolean;\r\n        containsField?: string;\r\n        equalityFilter?: any;\r\n        criteria?: any[];\r\n    }\r\n\r\n    @Serenity.Decorators.registerEditor(\"Serenity.ServiceLookupEditorBase\")\r\n    export class ServiceLookupEditorBase<TOptions extends ServiceLookupEditorOptions, TItem> extends Select2Editor<TOptions, TItem> {\r\n\r\n        constructor(input: JQuery, opt?: TOptions) {\r\n            super(input, opt);\r\n        }\r\n\r\n        protected getDialogTypeKey() {\r\n            var dialogTypeKey = super.getDialogTypeKey();\r\n            if (dialogTypeKey)\r\n                return dialogTypeKey;\r\n\r\n            var service = this.getService();\r\n            if (Q.startsWith(service, \"~/Services/\"))\r\n                service = service.substr(\"~/Services/\".length);\r\n\r\n            if (service.split('/').length == 3)\r\n                service = service.substr(0, service.lastIndexOf('/'));\r\n\r\n            return service.replace(\"/\", \".\");\r\n        }\r\n\r\n        protected getService(): string {\r\n            return this.options.service;\r\n        }\r\n\r\n        protected getServiceUrl() {\r\n            var url = this.getService();\r\n            if (url == null)\r\n                throw new Error(\"ServiceLookupEditor requires 'service' option to be configured!\");\r\n\r\n            if (!Q.startsWith(url, \"~\") && !Q.startsWith(url, \"/\") && url.indexOf('://') < 0)\r\n                url = \"~/Services/\" + url;\r\n\r\n            if (Q.startsWith(url, \"~\"))\r\n                url = Q.resolveUrl(url);\r\n\r\n            return url;\r\n        }\r\n\r\n        protected getIncludeColumns() {\r\n            var include = this.options.includeColumns || [];\r\n            var idField = this.getIdField();\r\n\r\n            if (idField && include.indexOf(idField) < 0)\r\n                include.push(idField);\r\n\r\n            var textField = this.getTextField();\r\n            if (textField && include.indexOf(textField) < 0)\r\n                include.push(textField);\r\n\r\n            return include;\r\n        }\r\n\r\n        protected getSort() {\r\n            return this.options.sort || (this.getTextField() ? [this.getTextField()] : null);\r\n        }\r\n\r\n        protected getCascadeCriteria(): any[] {\r\n\r\n            var val = this.get_cascadeValue();\r\n\r\n            if (val == null || val === '') {\r\n\r\n                if (!Q.isEmptyOrNull(this.get_cascadeField())) {\r\n                    return ['1', '=', '0'];\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            var fld = this.get_cascadeField();\r\n\r\n            return [[fld], '=', val];\r\n        }\r\n\r\n        protected getFilterCriteria(): any[] {\r\n            var val = this.get_filterValue();\r\n\r\n            if (val == null || val === '') {\r\n                return null;\r\n            }\r\n\r\n            var fld = this.get_filterField();\r\n            return [[fld], '=', val];\r\n        }\r\n\r\n        protected getIdListCriteria(idList: any[]): any[] {\r\n            if (idList == null)\r\n                return null;\r\n\r\n            if (idList.length == 0)\r\n                return ['0', '=', '1'];\r\n\r\n            var idField = this.getIdField();\r\n            if (idField == null)\r\n                throw new Error(\"ServiceLookupEditor requires 'idField' option to be configured!\");\r\n\r\n            return [[idField], 'in', [idList]];\r\n        }\r\n\r\n        protected getCriteria(query: Select2SearchQuery): any[] {\r\n            return Serenity.Criteria.and(\r\n                Serenity.Criteria.and(this.getIdListCriteria(query.idList), this.options.criteria),\r\n                Serenity.Criteria.and(this.getCascadeCriteria(), this.getFilterCriteria()));\r\n        }\r\n\r\n        protected getListRequest(query: Select2SearchQuery): ListRequest {\r\n\r\n            var request: Serenity.ListRequest = {};\r\n\r\n            if (query.searchTerm)\r\n                request.ContainsText = query.searchTerm;\r\n\r\n            request.Sort = this.getSort();\r\n            request.ColumnSelection = this.options.columnSelection || Serenity.ColumnSelection.KeyOnly;\r\n            request.IncludeColumns = this.getIncludeColumns();\r\n            request.ExcludeColumns = this.options.excludeColumns;\r\n            request.ContainsField = this.options.containsField;\r\n            request.EqualityFilter = this.options.equalityFilter;\r\n            request.Criteria = this.getCriteria(query);\r\n            request.Skip = query.skip || 0;\r\n            request.Take = query.take ? (query.checkMore ? query.take + 1 : query.take) : 0;\r\n            request.IncludeDeleted = this.options.includeDeleted;\r\n            request.ExcludeTotalCount = true;\r\n\r\n            return request;\r\n        }\r\n\r\n        protected getServiceCallOptions(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): ServiceOptions<ListResponse<TItem>> {\r\n            return {\r\n                blockUI: false,\r\n                url: this.getServiceUrl(),\r\n                request: this.getListRequest(query),\r\n                onSuccess: response => {\r\n                    var items = response.Entities || [];\r\n\r\n                    if (items && query.take && query.checkMore && response.Entities.length > items.length)\r\n                        items = items.slice(0, query.take);\r\n\r\n                    results({\r\n                        items: items.slice(0, query.take),\r\n                        more: query.checkMore && query.take && items.length > query.take\r\n                    });\r\n                }\r\n            };\r\n        }\r\n\r\n        protected hasAsyncSource() {\r\n            return true;\r\n        }\r\n\r\n        protected asyncSearch(query: Select2SearchQuery, results: (result: Select2SearchResult<TItem>) => void): Select2SearchPromise {\r\n            var opt = this.getServiceCallOptions(query, results);\r\n            return Q.serviceCall(opt);\r\n        }\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.ServiceLookupEditor')\r\n    export class ServiceLookupEditor extends ServiceLookupEditorBase<ServiceLookupEditorOptions, any> {\r\n        constructor(hidden: JQuery, opt?: ServiceLookupEditorOptions) {\r\n            super(hidden, opt);\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface HtmlContentEditorOptions {\r\n        cols?: any;\r\n        rows?: any;\r\n    }\r\n\r\n    export interface CKEditorConfig {\r\n    }    \r\n\r\n    @Decorators.registerEditor('Serenity.HtmlContentEditor', [IStringValue, IReadOnly])\r\n    @Decorators.element('<textarea/>')\r\n    export class HtmlContentEditor extends Widget<HtmlContentEditorOptions>\r\n        implements IStringValue, IReadOnly {\r\n\r\n        private _instanceReady: boolean;\r\n\r\n        constructor(textArea: JQuery, opt?: HtmlContentEditorOptions) {\r\n            super(textArea, opt)\r\n\r\n            this._instanceReady = false;\r\n            HtmlContentEditor.includeCKEditor();\r\n\r\n            var id = textArea.attr('id');\r\n            if (Q.isTrimmedEmpty(id)) {\r\n                textArea.attr('id', this.uniqueName);\r\n                id = this.uniqueName;\r\n            }\r\n\r\n            if (this.options.cols != null)\r\n                textArea.attr('cols', this.options.cols);\r\n\r\n            if (this.options.rows != null)\r\n                textArea.attr('rows', this.options.rows);\r\n\r\n            this.addValidationRule(this.uniqueName, e => {\r\n                if (e.hasClass('required')) {\r\n                    var value = Q.trimToNull(this.get_value());\r\n                    if (value == null)\r\n                        return Q.text('Validation.Required');\r\n                }\r\n\r\n                return null;\r\n            });\r\n\r\n            Serenity.LazyLoadHelper.executeOnceWhenShown(this.element, () => {\r\n                var config = this.getConfig();\r\n                window['CKEDITOR'] && window['CKEDITOR'].replace(id, config);\r\n            });\r\n        }\r\n\r\n        protected instanceReady(x: any): void {\r\n            this._instanceReady = true;\r\n            $(x.editor.container.$).addClass(this.element.attr('class'));\r\n            this.element.addClass('select2-offscreen').css('display', 'block');\r\n\r\n            // for validation to work\r\n            x.editor.setData(this.element.val());\r\n            x.editor.setReadOnly(this.get_readOnly());\r\n        }\r\n\r\n        protected getLanguage(): string {\r\n            if (!window['CKEDITOR'])\r\n                return 'en';\r\n\r\n            var CKEDITOR = window['CKEDITOR'];\r\n\r\n            var lang = Q.coalesce(Q.trimToNull($('html').attr('lang')), 'en');\r\n            if (!!CKEDITOR.lang.languages[lang]) {\r\n                return lang;\r\n            }\r\n            if (lang.indexOf(String.fromCharCode(45)) >= 0) {\r\n                lang = lang.split(String.fromCharCode(45))[0];\r\n            }\r\n            if (!!CKEDITOR.lang.languages[lang]) {\r\n                return lang;\r\n            }\r\n            return 'en';\r\n        }\r\n\r\n        protected getConfig(): CKEditorConfig {\r\n            return {\r\n                customConfig: '',\r\n                language: this.getLanguage(),\r\n                bodyClass: 's-HtmlContentBody',\r\n                on: {\r\n                    instanceReady: (x: any) => this.instanceReady(x),\r\n                    change: (x1: any) => {\r\n                        x1.editor.updateElement();\r\n                        this.element.triggerHandler('change');\r\n                    }\r\n                },\r\n                toolbarGroups: [\r\n                    {\r\n                        name: 'clipboard',\r\n                        groups: ['clipboard', 'undo']\r\n                    }, {\r\n                        name: 'editing',\r\n                        groups: ['find', 'selection', 'spellchecker']\r\n                    }, {\r\n                        name: 'insert',\r\n                        groups: ['links', 'insert', 'blocks', 'bidi', 'list', 'indent']\r\n                    }, {\r\n                        name: 'forms',\r\n                        groups: ['forms', 'mode', 'document', 'doctools', 'others', 'about', 'tools']\r\n                    }, {\r\n                        name: 'colors'\r\n                    }, {\r\n                        name: 'basicstyles',\r\n                        groups: ['basicstyles', 'cleanup']\r\n                    }, {\r\n                        name: 'align'\r\n                    }, {\r\n                        name: 'styles'\r\n                    }],\r\n                removeButtons: 'SpecialChar,Anchor,Subscript,Styles',\r\n                format_tags: 'p;h1;h2;h3;pre',\r\n                removeDialogTabs: 'image:advanced;link:advanced',\r\n                removePlugins: 'uploadimage,image2',\r\n                contentsCss: Q.resolveUrl('~/Content/site/site.htmlcontent.css'),\r\n                entities: false,\r\n                entities_latin: false,\r\n                entities_greek: false,\r\n                autoUpdateElement: true,\r\n                height: (this.options.rows == null || this.options.rows === 0) ? null :\r\n                    ((this.options.rows * 20) + 'px')\r\n            };\r\n        }\r\n\r\n        protected getEditorInstance() {\r\n            var id = this.element.attr('id');\r\n            return window['CKEDITOR'].instances[id];\r\n        }\r\n\r\n        destroy(): void {\r\n            var instance = this.getEditorInstance();\r\n            instance && instance.destroy(true);\r\n            super.destroy();\r\n        }\r\n\r\n        get_value(): string {\r\n            var instance = this.getEditorInstance();\r\n            if (this._instanceReady && instance) {\r\n                return instance.getData();\r\n            }\r\n            else {\r\n                return this.element.val();\r\n            }\r\n        }\r\n\r\n        get value(): string {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: string): void {\r\n            var instance = this.getEditorInstance();\r\n            this.element.val(value);\r\n            if (this._instanceReady && instance)\r\n                instance.setData(value);\r\n        }\r\n\r\n        set value(v: string) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return !Q.isEmptyOrNull(this.element.attr('disabled'));\r\n        }\r\n\r\n        set_readOnly(value: boolean) {\r\n\r\n            if (this.get_readOnly() !== value) {\r\n                if (value) {\r\n                    this.element.attr('disabled', 'disabled');\r\n                }\r\n                else {\r\n                    this.element.removeAttr('disabled');\r\n                }\r\n\r\n                var instance = this.getEditorInstance();\r\n                if (this._instanceReady && instance)\r\n                    instance.setReadOnly(value);\r\n            }\r\n        }\r\n\r\n        static CKEditorVer = \"4.7.1\";\r\n\r\n        static includeCKEditor(): void {\r\n            if (window['CKEDITOR']) {\r\n                return;\r\n            }\r\n\r\n            var script = $('#CKEditorScript');\r\n            if (script.length > 0) {\r\n                return;\r\n            }\r\n\r\n            $('<script/>').attr('type', 'text/javascript')\r\n                .attr('id', 'CKEditorScript')\r\n                .attr('src', Q.resolveUrl('~/Scripts/CKEditor/ckeditor.js?v=' +\r\n                    HtmlContentEditor.CKEditorVer))\r\n                .appendTo(window.document.head);\r\n        };\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.HtmlNoteContentEditor')\r\n    export class HtmlNoteContentEditor extends HtmlContentEditor {\r\n        constructor(textArea: JQuery, opt?: HtmlContentEditorOptions) {\r\n            super(textArea, opt);\r\n        }\r\n\r\n        protected getConfig(): CKEditorConfig {\r\n            var config = super.getConfig();\r\n            (config as any).removeButtons += ',Cut,Copy,Paste,BulletedList,NumberedList,' +\r\n                'Indent,Outdent,SpecialChar,Subscript,Superscript,Styles,PasteText,' +\r\n                'PasteFromWord,Strike,Link,Unlink,CreatePlaceholder,Image,Table,' +\r\n                'HorizontalRule,Source,Maximize,Format,Font,FontSize,Anchor,Blockquote,' +\r\n                'CreatePlaceholder,BGColor,JustifyLeft,JustifyCenter,' +\r\n                'JustifyRight,JustifyBlock,Superscript,RemoveFormat';\r\n\r\n            (config as any).removePlugins = 'elementspath,uploadimage,image2';\r\n            return config;\r\n        }\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.HtmlReportContentEditor')\r\n    export class HtmlReportContentEditor extends HtmlContentEditor {\r\n        constructor(textArea: JQuery, opt?: HtmlContentEditorOptions) {\r\n            super(textArea, opt);\r\n        }\r\n\r\n        protected getConfig(): CKEditorConfig {\r\n            var config = super.getConfig();\r\n            (config as any).removeButtons += ',Cut,Copy,Paste,BulletedList,NumberedList,' +\r\n                'Indent,Outdent,SpecialChar,Subscript,Superscript,Styles,' +\r\n                'PasteText,PasteFromWord,Strike,Link,Unlink,CreatePlaceholder,' +\r\n                'Image,Table,HorizontalRule,Source,Maximize,Format,Font,FontSize,' +\r\n                'Anchor,Blockquote,CreatePlaceholder,BGColor,JustifyLeft,JustifyCenter,' +\r\n                'JustifyRight,JustifyBlock,Superscript,RemoveFormat';\r\n\r\n            (config as any).removePlugins = 'elementspath,uploadimage,image2';\r\n            return config;\r\n        }\r\n    }\r\n\r\n\r\n}","namespace Serenity {\r\n\r\n    // http://digitalbush.com/projects/masked-input-plugin/\r\n    @Decorators.registerEditor('Serenity.MaskedEditor', [IStringValue])\r\n    @Decorators.element(\"<input type=\\\"text\\\"/>\")\r\n    export class MaskedEditor extends Widget<MaskedEditorOptions> {\r\n\r\n        constructor(input: JQuery, opt?: MaskedEditorOptions) {\r\n            super(input, opt);\r\n\r\n            (input as any).mask(this.options.mask || '', {\r\n                placeholder: Q.coalesce(this.options.placeholder, '_')\r\n            });\r\n        }\r\n\r\n        public get value(): string {\r\n            this.element.triggerHandler(\"blur.mask\");\r\n            return this.element.val();\r\n        }\r\n\r\n        protected get_value(): string {\r\n            return this.value;\r\n        }\r\n\r\n        public set value(value: string) {\r\n            this.element.val(value);\r\n        }\r\n\r\n        protected set_value(value: string): void {\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\n    export interface MaskedEditorOptions {\r\n        mask?: string;\r\n        placeholder?: string;\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface RecaptchaOptions {\r\n        siteKey?: string;\r\n        language?: string;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.Recaptcha', [IStringValue])\r\n    @Decorators.element(\"<div/>\")\r\n    export class Recaptcha extends Widget<RecaptchaOptions> implements IStringValue {\r\n        constructor(div: JQuery, opt: RecaptchaOptions) {\r\n            super(div, opt);\r\n\r\n            this.element.addClass('g-recaptcha').attr('data-sitekey', this.options.siteKey);\r\n            if (!!(window['grecaptcha'] == null && $('script#RecaptchaInclude').length === 0)) {\r\n                var src = 'https://www.google.com/recaptcha/api.js';\r\n                var lng = this.options.language;\r\n                if (lng == null) {\r\n                    lng = Q.coalesce($('html').attr('lang'), '');\r\n                }\r\n                src += '?hl=' + lng;\r\n                $('<script/>').attr('id', 'RecaptchaInclude').attr('src', src).appendTo(document.body);\r\n            }\r\n\r\n            var valInput = $('<input />').insertBefore(this.element)\r\n                .attr('id', this.uniqueName + '_validate').val('x');\r\n\r\n            var gro = {};\r\n            gro['visibility'] = 'hidden';\r\n            gro['width'] = '0px';\r\n            gro['height'] = '0px';\r\n            gro['padding'] = '0px';\r\n\r\n            var input = valInput.css(gro);\r\n            var self = this;\r\n\r\n            Q.addValidationRule(input, this.uniqueName, e => {\r\n                if (Q.isEmptyOrNull(this.get_value())) {\r\n                    return Q.text('Validation.Required');\r\n                }\r\n                return null;\r\n            });\r\n        }\r\n\r\n        get_value(): string {\r\n            return this.element.find('.g-recaptcha-response').val();\r\n        }\r\n\r\n        set_value(value: string): void {\r\n            // ignore\r\n        }\r\n    }\r\n}","namespace Serenity {\r\n\r\n    export interface FileUploadEditorOptions extends FileUploadConstraints {\r\n        displayFileName?: boolean; \r\n        urlPrefix?: string;\r\n    }\r\n\r\n    export interface ImageUploadEditorOptions extends FileUploadEditorOptions {\r\n    }\r\n\r\n    @Serenity.Decorators.registerEditor('Serenity.FileUploadEditor', [IReadOnly])\r\n    @Serenity.Decorators.element('<div/>')\r\n    export class FileUploadEditor extends Widget<FileUploadEditorOptions>\r\n        implements IReadOnly, IGetEditValue, ISetEditValue {\r\n\r\n        constructor(div: JQuery, opt: FileUploadEditorOptions) {\r\n            super(div, opt);\r\n\r\n            if (!opt || opt.allowNonImage == null)\r\n                this.options.allowNonImage = true;\r\n\r\n            div.addClass('s-FileUploadEditor');\r\n            \r\n            if (Q.isEmptyOrNull(this.options.originalNameProperty))\r\n                div.addClass('hide-original-name');\r\n\r\n            this.toolbar = new Toolbar($('<div/>').appendTo(this.element), {\r\n                buttons: this.getToolButtons()\r\n            });\r\n\r\n            var progress = $('<div><div></div></div>')\r\n                .addClass('upload-progress')\r\n                .prependTo(this.toolbar.element);\r\n\r\n            var uio = this.getUploadInputOptions();\r\n            this.uploadInput = UploadHelper.addUploadInput(uio);\r\n\r\n            this.fileSymbols = $('<ul/>').appendTo(this.element);\r\n            this.updateInterface();\r\n        }\r\n\r\n        protected getUploadInputOptions(): UploadInputOptions {\r\n            return {\r\n                container: this.toolbar.findButton('add-file-button'),\r\n                zone: this.element,\r\n                inputName: this.uniqueName,\r\n                progress: this.progress,\r\n                fileDone: (response, name, data) => {\r\n                    if (!UploadHelper.checkImageConstraints(response, this.options)) {\r\n                        return;\r\n                    }\r\n\r\n                    var newEntity: UploadedFile = {\r\n                        OriginalName: name,\r\n                        Filename: response.TemporaryFile\r\n                    };\r\n\r\n                    this.entity = newEntity;\r\n                    this.populate();\r\n                    this.updateInterface();\r\n                }\r\n            }\r\n        }\r\n\r\n        protected addFileButtonText(): string {\r\n            return Q.text('Controls.ImageUpload.AddFileButton');\r\n        }\r\n\r\n        protected getToolButtons(): ToolButton[] {\r\n            return [\r\n                {\r\n                    title: this.addFileButtonText(),\r\n                    cssClass: 'add-file-button',\r\n                    onClick: function () {\r\n                    }\r\n                },\r\n                {\r\n                    title: '',\r\n                    hint: Q.text('Controls.ImageUpload.DeleteButtonHint'),\r\n                    cssClass: 'delete-button',\r\n                    onClick: () => {\r\n                        this.entity = null;\r\n                        this.populate();\r\n                        this.updateInterface();\r\n                    }\r\n                }\r\n            ];\r\n        }\r\n\r\n        protected populate(): void {\r\n            var displayOriginalName = this.options.displayFileName ||\r\n                !Q.isTrimmedEmpty(this.options.originalNameProperty);\r\n\r\n            if (this.entity == null) {\r\n                UploadHelper.populateFileSymbols(this.fileSymbols,\r\n                    null, displayOriginalName, this.options.urlPrefix);\r\n            }\r\n            else {\r\n                UploadHelper.populateFileSymbols(\r\n                    this.fileSymbols, [this.entity], displayOriginalName,\r\n                    this.options.urlPrefix);\r\n            }\r\n        }\r\n\r\n        protected updateInterface(): void {\r\n            var addButton = this.toolbar.findButton('add-file-button');\r\n            var delButton = this.toolbar.findButton('delete-button');\r\n            addButton.toggleClass('disabled', this.get_readOnly());\r\n            delButton.toggleClass('disabled', this.get_readOnly() ||\r\n                this.entity == null);\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return this.uploadInput.attr('disabled') != null;\r\n        }\r\n\r\n        set_readOnly(value: boolean): void {\r\n            if (this.get_readOnly() !== value) {\r\n                if (value) {\r\n                    (this.uploadInput.attr('disabled', 'disabled') as any).fileupload('disable');\r\n                }\r\n                else {\r\n                    (this.uploadInput.removeAttr('disabled') as any).fileupload('enable');\r\n                }\r\n                this.updateInterface();\r\n            }\r\n        }\r\n\r\n        get_value(): UploadedFile {\r\n            if (this.entity == null) {\r\n                return null;\r\n            }\r\n            var copy = Q.extend({}, this.entity);\r\n            return copy;\r\n        }\r\n\r\n        get value(): UploadedFile {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: UploadedFile): void {\r\n            if (value != null) {\r\n                if (value.Filename == null) {\r\n                    this.entity = null;\r\n                }\r\n                else {\r\n                    this.entity = Q.extend({}, value);\r\n                }\r\n            }\r\n            else {\r\n                this.entity = null;\r\n            }\r\n            this.populate();\r\n            this.updateInterface();\r\n        }\r\n\r\n        set value(v: UploadedFile) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        getEditValue(property: PropertyItem, target: any) {\r\n            target[property.name] = this.entity == null ? null :\r\n                Q.trimToNull(this.entity.Filename);\r\n        }\r\n\r\n        setEditValue(source: any, property: PropertyItem) {\r\n            var value: UploadedFile = {};\r\n            value.Filename = source[property.name];\r\n            if (Q.isEmptyOrNull(this.options.originalNameProperty)) {\r\n\r\n                if (this.options.displayFileName) {\r\n                    var s = Q.coalesce(value.Filename, '');\r\n                    var idx = Q.replaceAll(s, '\\\\', '/').lastIndexOf('/');\r\n                    if (idx >= 0) {\r\n                        value.OriginalName = s.substr(idx + 1);\r\n                    }\r\n                    else {\r\n                        value.OriginalName = s;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                value.OriginalName = source[this.options.originalNameProperty];\r\n            }\r\n\r\n            this.set_value(value);\r\n        }\r\n\r\n        protected entity: UploadedFile;\r\n        protected toolbar: Toolbar;\r\n        protected progress: JQuery;\r\n        protected fileSymbols: JQuery;\r\n        protected uploadInput: JQuery;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.ImageUploadEditor')\r\n    export class ImageUploadEditor extends FileUploadEditor {\r\n        constructor(div: JQuery, opt: ImageUploadEditorOptions) {\r\n            super(div, opt);\r\n\r\n            if (opt && opt.allowNonImage == null)\r\n                this.options.allowNonImage = false;\r\n\r\n            div.addClass('s-ImageUploadEditor');\r\n        }\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.MultipleFileUploadEditor', [IReadOnly])\r\n    @Decorators.element('<div/>')\r\n    export class MultipleFileUploadEditor extends Widget<FileUploadEditorOptions>\r\n        implements IReadOnly, IGetEditValue, ISetEditValue {\r\n\r\n        private entities: UploadedFile[];\r\n        private toolbar: Toolbar;\r\n        private fileSymbols: JQuery;\r\n        private uploadInput: JQuery;\r\n\r\n        constructor(div: JQuery, opt: ImageUploadEditorOptions) {\r\n            super(div, opt);\r\n\r\n            this.entities = [];\r\n            div.addClass('s-MultipleFileUploadEditor');\r\n            var self = this;\r\n            this.toolbar = new Toolbar($('<div/>').appendTo(this.element), {\r\n                buttons: this.getToolButtons()\r\n            });\r\n            var progress = $('<div><div></div></div>')\r\n                .addClass('upload-progress').prependTo(this.toolbar.element);\r\n\r\n            var addFileButton = this.toolbar.findButton('add-file-button');\r\n\r\n            this.uploadInput = Serenity.UploadHelper.addUploadInput({\r\n                container: addFileButton,\r\n                zone: this.element,\r\n                inputName: this.uniqueName,\r\n                progress: progress,\r\n                fileDone: (response, name, data) => {\r\n                    if (!UploadHelper.checkImageConstraints(response, this.options)) {\r\n                        return;\r\n                    }\r\n                    var newEntity = { OriginalName: name, Filename: response.TemporaryFile };\r\n                    self.entities.push(newEntity);\r\n                    self.populate();\r\n                    self.updateInterface();\r\n                }\r\n            });\r\n\r\n            this.fileSymbols = $('<ul/>').appendTo(this.element);\r\n            this.updateInterface();\r\n        }\r\n\r\n        protected addFileButtonText(): string {\r\n            return Q.text('Controls.ImageUpload.AddFileButton');\r\n        }\r\n\r\n        protected getToolButtons(): ToolButton[] {\r\n            return [{\r\n                title: this.addFileButtonText(),\r\n                cssClass: 'add-file-button',\r\n                onClick: function () {\r\n                }\r\n            }];\r\n        }\r\n\r\n        protected populate(): void {\r\n            Serenity.UploadHelper.populateFileSymbols(this.fileSymbols, this.entities,\r\n                true, this.options.urlPrefix);\r\n\r\n            this.fileSymbols.children().each((i, e) => {\r\n                var x = i;\r\n                $(\"<a class='delete'></a>\").appendTo($(e).children('.filename'))\r\n                    .click(ev => {\r\n                        ev.preventDefault();\r\n                        this.entities.splice(x, 1);\r\n                        this.populate();\r\n                    });\r\n            });\r\n        }\r\n\r\n        protected updateInterface(): void {\r\n            var addButton = this.toolbar.findButton('add-file-button');\r\n            addButton.toggleClass('disabled', this.get_readOnly());\r\n            this.fileSymbols.find('a.delete').toggle(!this.get_readOnly());\r\n        }\r\n\r\n        get_readOnly(): boolean {\r\n            return this.uploadInput.attr('disabled') != null;\r\n        }\r\n\r\n        set_readOnly(value: boolean): void {\r\n            if (this.get_readOnly() !== value) {\r\n                if (value) {\r\n                    (this.uploadInput.attr('disabled', 'disabled') as any).fileupload('disable');\r\n                }\r\n                else {\r\n                    (this.uploadInput.removeAttr('disabled') as any).fileupload('enable');\r\n                }\r\n                this.updateInterface();\r\n            }\r\n        }\r\n\r\n        get_value(): UploadedFile[] {\r\n            return this.entities.map(function (x) {\r\n                return Q.extend({}, x);\r\n            });\r\n        }\r\n\r\n        get value(): UploadedFile[] {\r\n            return this.get_value();\r\n        }\r\n\r\n        set_value(value: UploadedFile[]) {\r\n            this.entities = (value || []).map(function (x) {\r\n                return Q.extend({}, x);\r\n            });\r\n            this.populate();\r\n            this.updateInterface();\r\n        }\r\n\r\n        set value(v: UploadedFile[]) {\r\n            this.set_value(v);\r\n        }\r\n\r\n        getEditValue(property: PropertyItem, target: any) {\r\n            if (this.jsonEncodeValue) {\r\n                target[property.name] = $.toJSON(this.get_value());\r\n            }\r\n            else {\r\n                target[property.name] = this.get_value();\r\n            }\r\n        }\r\n\r\n        setEditValue(source: any, property: PropertyItem) {\r\n            var val = source[property.name];\r\n            if (Q.isInstanceOfType(val, String)) {\r\n                var json = Q.coalesce(Q.trimToNull(val), '[]');\r\n                if (Q.startsWith(json, '[') && Q.endsWith(json, ']')) {\r\n                    this.set_value($.parseJSON(json));\r\n                }\r\n                else {\r\n                    this.set_value([{\r\n                        Filename: json,\r\n                        OriginalName: 'UnknownFile'\r\n                    }]);\r\n                }\r\n            }\r\n            else {\r\n                this.set_value(val as any);\r\n            }\r\n        }\r\n\r\n        @Decorators.option()\r\n        public jsonEncodeValue: boolean;\r\n    }\r\n\r\n    @Decorators.registerEditor('Serenity.MultipleImageUploadEditor')\r\n    export class MultipleImageUploadEditor extends MultipleFileUploadEditor {\r\n        constructor(div: JQuery, opt: ImageUploadEditorOptions) {\r\n            super(div, opt);\r\n\r\n            div.addClass('s-MultipleImageUploadEditor');\r\n        }\r\n    }\r\n}"]}